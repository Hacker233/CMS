webpackJsonp([0],[,function(e,t,n){(function(t){t.use({install(e,t){e.prototype.$remote=global.remote,e.prototype.$apiLogin=global.api}}),document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()};var r={err:function(e){"object"==typeof e?(r.tip(e.message,0),console.log(e.message)):(r.tip(e,0),console.log(e))},ready:function(e){document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1):document.attachEvent?document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),e())}):document.lastChild==document.body&&e()},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},clone:function(e){var t,n,r=e;if(e&&((n=e instanceof Array)||e instanceof Object))for(t in r=n?[]:{},e)e.hasOwnProperty(t)&&(r[t]=arguments.callee(e[t]));return r},addClass:function(e,t){""==e.className?e.className=t:e.className+=" "+t},removeClass:function(e,t){var n=new RegExp(t+"|\\s+"+t+"|"+t+"\\s+","gi");e.className=e.className.replace(n,"")},addEventListener:function(e,t,n){t.split(" ").forEach(function(t){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)})},removeEventListener:function(e,t,n){t.split(" ").forEach(function(t){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)})},once:function(e,t,n){r.addEventListener(e,t,function(){n.apply(this,arguments),r.removeEventListener(e,t,arguments.callee)})},startLoading:function(e){var t=["不忘初心，方得始终","愿每一个程序员有情人终成眷属","嘿咻嘿咻拼命加载中！"];if(!document.getElementById("SBDocStartLoading")){var n,r=document.createElement("div");if(r.id="SBDocStartLoading",r.style.position="absolute",r.style.zIndex=1e4,r.style.backgroundColor="white",1==e)n=document.getElementById("showContent"),r.style.left="100px",r.style.top="60px",r.style.width="calc(100vw - 100px)",r.style.height="calc(100vh - 60px)";else if(2==e){var o=(n=document.getElementById("interfaceContent")).getBoundingClientRect();r.style.left=o.left+"px",r.style.top=o.top+40+"px",r.style.width=o.width+"px",r.style.height="calc(100vh - 155px)"}else if(3==e){o=(n=document.getElementById("testInfoContent")).getBoundingClientRect();r.style.left=o.left+"px",r.style.top=o.top+40+"px",r.style.width=o.width+"px",r.style.height="calc(100vh - 155px)"}else r.style.left=0,r.style.top=0,r.style.width="100%",r.style.height=document.documentElement.clientHeight+"px",r.style.backgroundColor="rgb(45,45,45)";r.innerHTML='<div style="text-align: center;margin-top: '+(document.documentElement.clientHeight/2-100)+'px"><div class="fa fa-spinner fa-spin" style="color: #50bfff;font-size: 30px;"></div><div style="margin-top: 30px;color: gray;font-size: 15px">'+(n?t[parseInt(Math.random()*t.length)]:"DOClever,做最好的接口管理平台")+"</div></div>",document.body.appendChild(r)}},stopLoading:function(){setTimeout(function(){var e=document.getElementById("SBDocStartLoading");e&&(r.addClass(e,"animated fadeOut"),r.once(e,"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){var e=document.getElementById("SBDocStartLoading");e&&e.parentNode.removeChild(e)}))},100)},animate:function(e,t){e&&(t="animated "+t,r.addClass(e,t),r.once(e,"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){r.removeClass(e,t)}))},query:function(e,t){return t?t.querySelector(e):document.querySelector(e)},queryAll:function(e,t){return t?t.querySelectorAll(e):document.querySelectorAll(e)},confirm:function(e,n,r){return new Promise(function(o,i){t.prototype.$confirm(e,"DOClever",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n?n():o(!0)}).catch(function(){r?r():o(!1)})})},tip:function(e,n){if(1==n)t.prototype.$message.success(e);else if(0==n)t.prototype.$message.error(e);else if(2==n)t.prototype.$message.warning(e);else if(3==n)return t.prototype.$message({dangerouslyUseHTMLString:!0,message:`<i class='el-icon-loading'></i>${e}`,duration:0})},loading:function(e){return r.tip(e,3)},notify:function(e,n){n?t.prototype.$notify({title:e,type:"success",duration:1e3}):t.prototype.$notify({title:e,type:"error",duration:1e3})},input:function(e,n,r){t.prototype.$prompt(e,"DOClever",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(e){if(""===e)return"请输入内容"},inputValue:r||""}).then(function(e){n&&n(e)}).catch(function(){})},showMenu:function(e,o,i){var s=document.createElement("div");e.$el.appendChild(s);var a=r.getCaretCoordinates(o,o.selectionStart),u=o.getBoundingClientRect(),c=e,l=new(t.extend(n(14)))({el:s,parent:c,propsData:{source:i}});return l.$on("level",function(e){var t=l.$el,n=150*e;u.left+n>document.documentElement.clientWidth?t.style.left=document.documentElement.clientWidth-n+"px":t.style.left=a.left+u.left+"px"}),l.$el.style.left=a.left+u.left+"px",a.top+u.top+a.height+210>document.documentElement.clientHeight?l.$el.style.top=a.top+u.top-210+"px":l.$el.style.top=a.top+u.top+a.height+10+"px",l},inputMul:function(e,r,o,i,s){var a=document.createElement("div");e.$el.appendChild(a);var u=e,c=new(t.extend(n(22)))({el:a,parent:u,propsData:{placeholder:r,hudremove:i,source:s}});return c.$data.showDialog=!0,c.$refs.box.$on("close",function(){c.$el.parentNode.removeChild(c.$el)}),c.$on("save",function(e){o?o(e)&&(c.$data.showDialog=!1):c.$data.showDialog=!1}),c},inputTwo:function(e,r,o,i,s,a,u,c,l){var f=document.createElement("div");e.$el.appendChild(f);var h=e,d=new(t.extend(n(26)))({el:f,parent:h,propsData:{name1:r,name2:o,placeholder1:i,placeholder2:s,text1:a,text2:u,hudremove:l}});return d.$data.showDialog=!0,d.$refs.box.$on("close",function(){d.$el.parentNode.removeChild(d.$el)}),d.$on("save",function(e,t){c?c(e,t)&&(d.$data.showDialog=!1):d.$data.showDialog=!1}),d}},o=null;r.startHud=function(e){o=e?t.prototype.$loading({target:e,background:"white"}):t.prototype.$loading({fullscreen:!0})},r.stopHud=function(){o&&(o.close(),o=null)},r.getNowFormatDate=function(e,t){var n={"M+":(t=t||new Date).getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},r.showBox=function(e,n,r){var o=document.createElement("div");e.$el.appendChild(o);var i=e,s=new(t.extend(n))({el:o,parent:i,propsData:r||null});return s.$data.showDialog=!0,s.$refs.box.$on("close",function(){s.$el.parentNode.removeChild(s.$el),s.$destroy()}),s},r.param=function(e,t){var n=[];for(var r in e)n.push((t?encodeURIComponent(r):r)+"="+encodeURIComponent(e[r]));return n.join("&")},r.inArr=function(e,t){for(var n=0;n<t.length;n++)if(e.toLowerCase()==t[n].toLowerCase())return!0;return!1},r.parseURL=function(e){var t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,query:t.search,params:function(){for(var e,n={},r=t.search.replace(/^\?/,"").split("&"),o=r.length,i=0;i<o;i++)r[i]&&(n[(e=r[i].split("="))[0]]=e[1]);return n}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:t.pathname.replace(/^\//,"").split("/")}},r.createUrlObject=function(e){return void 0!=window.createObjectURL?window.createObjectURL(e):void 0!=window.URL?window.URL.createObjectURL(e):void 0!=window.webkitURL?window.webkitURL.createObjectURL(e):void 0},r.revokeUrlObject=function(e){return void 0!=window.createObjectURL?window.revokeObjectURL(e):void 0!=window.URL?window.URL.revokeObjectURL(e):void 0!=window.webkitURL?window.webkitURL.revokeObjectURL(e):void 0},r.basePath=function(){var e=location.href,t=e.indexOf("/controller/");return e.substring(0,t+"/controller/".length)},r.rand=function(e,t){var n=t-e,r=Math.random();return e+Math.round(r*n)},r.getCaretCoordinates=function(e,t,n){var r="undefined"!=typeof window,o=r&&null!=window.mozInnerScreenX;if(!r)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var i=n&&n.debug||!1;if(i){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);var u=a.style,c=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,l="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",l||(u.wordWrap="break-word"),u.position="absolute",i||(u.visibility="hidden"),["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach(function(e){l&&"lineHeight"===e?u.lineHeight=c.height:u[e]=c[e]}),o?e.scrollHeight>parseInt(c.height)&&(u.overflowY="scroll"):u.overflow="hidden",a.textContent=e.value.substring(0,t),l&&(a.textContent=a.textContent.replace(/\s/g," "));var f=document.createElement("span");f.textContent=e.value.substring(t)||".",a.appendChild(f);var h={top:f.offsetTop+parseInt(c.borderTopWidth),left:f.offsetLeft+parseInt(c.borderLeftWidth),height:parseInt(c.lineHeight)};return i?f.style.backgroundColor="#aaa":document.body.removeChild(a),h},r.tagReplace=function(e){var t={"&":"&amp","<":"&lt",">":"&gt"};return e.replace(/[&<>]/g,function(e){return t[e]||e})},r.insertTextAtCursor=function(e,t){var n,r,o=e.value;void 0!==e.selectionStart&&void 0!==e.selectionEnd?(n=e.selectionEnd,e.value=o.slice(0,e.selectionStart)+t+o.slice(n),e.selectionStart=e.selectionEnd=n+t.length):void 0!==document.selection&&void 0!==document.selection.createRange&&(e.focus(),(r=document.selection.createRange()).collapse(!1),r.text=t,r.select())},function(){var e=document.createElement("script"),t=window.location.protocol.split(":")[0];e.src="https"===t?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),e.exports=r}).call(t,n(0))},function(e,t){e.exports=require("stream")},function(e,t){let n=sessionStorage.getItem("baseUrl");e.exports={baseUrl:n&&n.startsWith("http://")?n:"http://"+n,host:n&&n.startsWith("http://")?n:"http://"+n,online:window.debug?"http://localhost:8090":"http://doclever.cn:8090"}},function(e,t){e.exports=function(e,t,n,r){var o,i=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(o=e,i=e.default);var a="function"==typeof i?i.options:i;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),n&&(a._scopeId=n),r){var u=Object.create(a.computed||null);Object.keys(r).forEach(function(e){var t=r[e];u[e]=function(){return t}}),a.computed=u}return{esModule:o,exports:i,options:a}}},,function(e,t,n){n(3);var r={update:function(e,t,n){sessionStorage.setItem("login","1"),void 0!==e._id&&null!==e._id?(r.set("id",e._id),global.api.cookie.set("docleveruserid",e._id,1)):(r.remove("id"),global.api.cookie.remove("docleveruserid")),void 0!==e.name&&null!==e.name?r.set("name",e.name):r.remove("name"),void 0!==e.photo&&null!==e.photo?r.set("photo",e.photo):r.remove("photo"),void 0!==e.qq&&null!==e.qq?r.set("qq",e.qq):r.remove("qq"),void 0!==e.email&&null!==e.email?r.set("email",e.email):r.remove("email"),void 0!==e.phone&&null!==e.phone?r.set("phone",e.phone):r.remove("phone"),void 0!==e.sex&&null!==e.sex?r.set("sex",e.sex):r.remove("sex"),void 0!==e.age&&null!==e.age?r.set("age",e.age):r.remove("age"),void 0!==e.company&&null!==e.company?r.set("company",e.company):r.remove("company"),void 0!==e.loginCount&&null!==e.loginCount?r.set("loginCount",e.loginCount):r.remove("loginCount"),t?r.set("remember",1):r.remove("remember"),n?r.set("password",n):r.remove("password")},get:function(e){return localStorage.getItem(e)},set:function(e,t){localStorage.setItem(e,t);var n=document.createEvent("HTMLEvents");n.initEvent("sessionChange",!1,!1),n.key=e,n.value=t,document.dispatchEvent(n)},clear:function(){localStorage.clear();var e=document.createEvent("HTMLEvents");e.initEvent("sessionClear",!1,!1),document.dispatchEvent(e)},raw:function(){let e={};for(var t=0;t<localStorage.length;t++)e[localStorage.key(t)]=localStorage.getItem(localStorage.key(t));return e},remove:function(e){localStorage.removeItem(e);var t=document.createEvent("HTMLEvents");t.initEvent("sessionRemove",!1,!1),t.key=e,document.dispatchEvent(t)}};e.exports=r},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))o.call(n,c)&&(a[c]=n[c]);if(r){s=r(n);for(var l=0;l<s.length;l++)i.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(e,t,n){var r=n(59);e.exports=function(){return r.randomBytes(16)}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}},,,function(e,t,n){(function(e,t,r,o){const i=n(55),s=n(3);global.rootVue=new e({el:"#app",data:{envId:"",arrEnv:[],remember:0,username:"",password:"",addPending:!1,showAdd:!1,envEdit:{name:"",url:""},objVersion:{},objRegister:{username:"",pwd:"",pwd1:"",email:"",question:"",answer:""},showRegister:!1,registerPending:!1,member:"",arrMember:[],showApplyMember:!1,memberEdit:{user:"",pass:"",name:"",remark:""},reset:{question:"",pwd:"",pwd1:"",answer:"",resetPending:!1,questionPending:!1,step:0,username:""},showReset:!1},watch:{envId:{handler:async function(){this.envId&&await this.handleChangeEnvId()}}},methods:{handleUrl:function(e){let n,r="";if("doclever.cn"==(n=e?t.get("env"):this.envId))r=window.debug?"http://localhost:8090":"http://doclever.cn:8090";else for(let e of this.arrEnv)if(e.id==n){r=e.url;break}return r.startsWith("http://")||r.startsWith("https://")||(r="http://"+r),r},handleChangeEnvId:async function(e){let t;try{let n=this.handleUrl(e);n+="/user/version",t=r.loading("正在连接服务器...");let i=await o.get(`${n}`,null,null,null,1,5e3);t.close(),this.objVersion=i.data,r.tip("连接成功",1)}catch(e){t.close(),this.objVersion={},r.err("未连接到服务器")}},add:function(){this.envEdit={name:"",url:""},this.showAdd=!0},addEnv:async function(){if(!this.envEdit.name)return r.tip("请填入环境名称",0),!1;if(!this.envEdit.url)return r.tip("请填入服务器地址",0),!1;let e;this.addPending=!0;try{e=await i.addEnv(this.envEdit.id,this.envEdit.name,this.envEdit.url)}catch(e){return this.addPending=!1,void r.tip(e.msg,0)}if(r.tip("修改成功",1),this.addPending=!1,this.envEdit.id)for(let e of this.arrEnv)this.envEdit.id==e.id&&(e.name=this.envEdit.name,e.url=this.envEdit.url);else this.arrEnv.push(e);this.showAdd=!1},removeEnv:async function(e,t){await r.confirm("是否删除该环境")&&(await i.delEnv(e.id),await this.$apiLogin.path.delEnv(e.id),this.arrEnv.splice(t,1),r.tip("删除成功",1))},editEnv:function(e){this.envEdit=r.clone(e),this.showAdd=!0},refresh:async function(){await this.handleChangeEnvId()},register:async function(){if(!(this.objRegister.username&&this.objRegister.pwd&&this.objRegister.pwd1&&this.objRegister.question&&this.objRegister.answer&&this.objRegister.email))return void this.$message.error("用户名密码,找回密码问题，找回密码答案,邮箱不能为空");if(this.objRegister.pwd!=this.objRegister.pwd1)return void this.$message.error("两次输入的密码不一致");if(!/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,5}$/.test(this.objRegister.email))return void r.tip("邮箱格式不正确",0);this.registerPending=!0;let e=this.handleUrl(),t=await o.post(e+"/user/save",{name:this.objRegister.username,password:this.objRegister.pwd,question:this.objRegister.question,answer:this.objRegister.answer,email:this.objRegister.email},null,null,0,1);this.registerPending=!1,200==t.code?(r.tip("注册成功",1),this.showRegister=!1):r.tip(t.msg,0)},login:async function(){try{if(!this.username||!this.password)throw"用户名密码不能为空";let e=this.handleUrl(),n=await o.post(e+"/user/login",{name:this.username,password:this.password},null,null,null,1,0);if(200!=n.code)throw"用户名密码错误";let i,s=await this.$apiLogin.update.checkIfNeededUpdate(this.envId,this.objVersion.version);i=s&&this.objVersion.url?await this.$apiLogin.update.updateEnv(this.envId,e+this.objVersion.url):this.$apiLogin.path.getEnvPath(this.envId);let a=!1;!this.member&&(!window.debug&&e.includes("doclever.cn")||window.debug&&e.includes("localhost:8090"))&&(a=!0);await this.memberLogin(a,n.data._id);r.tip("登陆成功",1),t.clear(),t.update(n.data,this.remember,this.password),sessionStorage.setItem("env",this.envId),this.remember?(t.set("env",this.envId),this.member&&t.set("member",this.member)):t.remove("env"),sessionStorage.setItem("baseUrl",e),sessionStorage.setItem("first","1"),sessionStorage.setItem("loginUrl",location.href),sessionStorage.setItem("version",this.objVersion.version),setTimeout(()=>{location.href=window.debug?"/web/console/index.html":i+"/content/index.html"},1500)}catch(e){r.err(e)}},applyMember:async function(){let e={};if(!this.memberEdit.user)return void r.tip("请输入用户名",0);if(e.user=this.memberEdit.user,!this.memberEdit.pass)return void r.tip("请输入密码",0);if(e.pass=this.memberEdit.pass,!this.memberEdit.name)return void r.tip("请输入主机名称",0);e.name=this.memberEdit.name,e.mac=await this.$apiLogin.macAddress(),this.memberEdit.remark&&(e.remark=this.memberEdit.remark);let t=await o.post(s.online+"/member/apply",e,{desktop:"1"},null,0,0,1);200==t.code||56==t.code?(200==t.code?r.tip("申请成功，等待管理员同意",1):r.tip("申请已通过",1),this.showApplyMember=!1,i.editMember(e.user,e.pass),this.arrMember.push({user:e.user,pass:e.pass,disabled:200==t.code})):r.tip(t.msg,0),this.memberEdit={user:"",pass:"",name:e.mac,remark:""}},getValidMember:async function(){let e=await i.getAllMember(),t=await this.$apiLogin.macAddress(),n=e.map(function(e){return{user:e.user,pass:e.pass,mac:t}}),a=await o.post(s.online+"/member/validmemeber",{member:JSON.stringify(n)},{desktop:"1"},null,0,0,1);if(200==a.code){for(let t of e)a.data.includes(t.user)?t.disbaled=!1:t.disabled=!0;this.arrMember=e}else r.tip(a.msg,0)},memberLogin:async function(e,t,n){let r;if(e)r=t;else{if(!this.member)return;let t;for(let e of this.arrMember)if(this.member==e.user){t=e;break}if(!t)return;let n=await this.$apiLogin.macAddress(),i=await o.post(s.online+"/member/login",{mac:n,user:e?this.username:t.user,pass:t.pass},{desktop:"1"},null,0,0,1);if(200!=i.code)return void $.tip(i.msg,0);r=i.data}let i=await this.$apiLogin.update.handlePluginInfo(n||this.envId,r),a=await o.get(s.online+"/member/validplugin",{content:JSON.stringify(i),version:this.objVersion.version},{desktop:"1"},null,1);if(200!=a.code)return void $.tip(a.msg,0);sessionStorage.setItem("member",r);let u=[];for(let e of a.data)e.compatible&&u.push({id:e.id,version:e.version});return sessionStorage.setItem("plugin",JSON.stringify(u)),sessionStorage.setItem("version",this.objVersion.version),r},removeMember:async function(e,t){if(await r.confirm("是否删除该绑定")){if(!e.disabled){if(await $.confirm("是否解除与该会员的绑定")){let t=await this.$apiLogin.macAddress(),n=await o.delete(s.online+"/member/clientbind",{mac:t,user:e.user},{desktop:"1"},null,1);200==n.code&&await this.$apiLogin.path.delPlugin(n.data)}}await i.removeMember(e.user),this.arrMember.splice(t,1),r.tip("删除成功",1)}},getQuestion:function(){var e=this;if(!this.reset.username)return void r.tip("用户名不能为空",0);this.reset.questionPending=!0;let t=this.handleUrl();o.get(t+"/user/question",{name:e.reset.username},null,null,1,0).then(function(t){e.reset.questionPending=!1,200==t.code?(e.reset.step=1,e.reset.question=t.data):r.notify(t.msg,0)})},resetUser:function(){var e=this;if(!(this.reset.pwd&&this.reset.pwd1&&this.reset.answer))return void r.tip("密码,确认密码,找回密码答案不能为空",0);if(this.reset.pwd!=this.reset.pwd1)return void r.tip("两次输入的密码不一致",0);this.reset.questionPending=!0;let t=this.handleUrl();o.put(t+"/user/reset",{name:e.reset.username,answer:e.reset.answer,password:e.reset.pwd},null,null,1).then(function(t){e.reset.questionPending=!1,200==t.code?(r.notify("修改成功",1),e.showReset=!1):r.notify(t.msg,0)})}},created:async function(){let e;if(this.getValidMember(),this.memberEdit.name=this.$apiLogin.computeName(),this.arrEnv=await i.getAllEnv(),this.$on("startUpdate",function(){e=r.loading("开始更新部署环境")}),this.$on("updateProcess",function(t){e.message=`下载中，完成${parseInt(100*t)+"%"}`}),this.$on("updateUnzip",function(){e.message="部署环境解压中"}),this.$on("finishUpdate",function(t){e.close(),r.tip("更新完成",1)}),t.get("env")&&t.get("remember")&&t.get("name")&&t.get("password"))try{let e=!1;this.member=t.get("member");for(let t of this.arrMember)if(t.user==this.member){e=!0;break}await this.handleChangeEnvId(1);let n,i=this.handleUrl(1),s=await o.post(i+"/user/login",{name:t.get("name"),password:t.get("password")},null,null,null,1,0);if(200!=s.code)throw"用户名密码错误";n=await this.$apiLogin.update.checkIfNeededUpdate(t.get("env"),this.objVersion.version)&&this.objVersion.url?await this.$apiLogin.update.updateEnv(t.get("env"),i+this.objVersion.url):this.$apiLogin.path.getEnvPath(t.get("env"));let a,u=!1;!this.member&&(!window.debug&&i.includes("doclever.cn")||window.debug&&i.includes("localhost:8090"))&&(u=!0),(u||!u&&e)&&(a=await this.memberLogin(u,s.data._id,t.get("env")));let c=t.get("password"),l=t.get("env");t.clear(),t.update(s.data,1,c),t.set("env",l),sessionStorage.setItem("env",l),sessionStorage.setItem("baseUrl",i),(u||!u&&e)&&a&&t.set("member",this.member),sessionStorage.setItem("first","1"),sessionStorage.setItem("loginUrl",location.href),sessionStorage.setItem("version",this.objVersion.version),location.href=window.debug?"/web/console/index.html":n+"/content/index.html"}catch(e){r.err(e),r.stopLoading()}else r.stopLoading()}}),r.ready(function(){r.startLoading()})}).call(t,n(0),n(6),n(1),n(29))},function(e,t,n){n(15);var r=n(4)(n(20),n(21),null,null);r.options.__file="/Users/sunxin/new/Client/web/component/multiMenu.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] multiMenu.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},function(e,t,n){var r=n(16);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(18)("16ae5186",r,!1)},function(e,t,n){(e.exports=n(17)(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"multiMenu.vue",sourceRoot:""}])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o=n(19),i={},s=r&&(document.head||document.getElementsByTagName("head")[0]),a=null,u=0,c=!1,l=function(){},f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(p(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(p(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:s}}}}function d(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function p(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(c)return l;r.parentNode.removeChild(r)}if(f){var o=u++;r=a||(a=d()),t=g.bind(null,r,o,!1),n=g.bind(null,r,o,!0)}else r=d(),t=function(e,t){var n=t.css,r=t.media,o=t.sourceMap;r&&e.setAttribute("media",r);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}e.exports=function(e,t,n){c=n;var r=o(e,t);return h(r),function(t){for(var n=[],s=0;s<r.length;s++){var a=r[s];(u=i[a.id]).refs--,n.push(u)}t?h(r=o(e,t)):r=[];for(s=0;s<n.length;s++){var u;if(0===(u=n[s]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete i[u.id]}}}};var m,v=(m=[],function(e,t){return m[e]=t,m.filter(Boolean).join("\n")});function g(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var i=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=i[0],a={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}},function(e,t,n){"use strict";(function(t){e.exports={name:"multimenu",props:{val:{type:Array,default:[]},source:{type:Array,default:[]},xy:{type:Object}},data:function(){return{closeHandle:this.close.bind(this),arr:function(){var e=t.clone(this.source);return e.forEach(function(e){e.select=0}),e}.call(this),selItem:null}},methods:{enter:function(e){this.selItem&&(this.selItem.select=0),e.select=1,this.selItem=e,e.data&&e.data.length>0?this.$emit("level",this.val.length+2):this.$emit("level",this.val.length+1)},leave:function(e,t){var n=t.relatedTarget;if(t.relatedTarget==this.$refs.menu.$el)e.select=1;else if(n.hasAttribute("menuIndex")){n.getAttribute("menuIndex")>this.val.length+1?e.select=1:e.select=0}else e.select=0},close:function(){0==this.val.length&&(this.$el.parentNode.removeChild(this.$el),this.$destroy())},select:function(e){this.$emit("click",this.val.concat([e.value]))},click:function(e){this.$emit("click",e)},level:function(e){this.$emit("level",e)}},created:function(){0==this.val.length&&document.addEventListener("click",this.closeHandle,!1)},mounted:function(){0==this.val.length&&document.addEventListener("keydown",this.closeHandle,!1)},beforeDestroy:function(){0==this.val.length&&(document.removeEventListener("click",this.closeHandle),document.removeEventListener("keydown",this.closeHandle))}}}).call(t,n(1))},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"row",staticStyle:{"font-size":"14px",position:"absolute",width:"auto","z-index":"10000","border-radius":"3px","box-shadow":"0 2px 12px 0 rgba(0,0,0,.1)",border:"1px solid #e4e7ed"},attrs:{menuIndex:e.val.length+1}},[n("el-col",{ref:"menu",staticClass:"col",staticStyle:{width:"150px",background:"white",height:"200px","overflow-y":"auto"},attrs:{menuIndex:e.val.length+1}},e._l(e.arr,function(t){return n("el-row",{staticClass:"row",staticStyle:{height:"35px","line-height":"35px"},style:{backgroundColor:t.select?"#F3F3F3":""},attrs:{menuIndex:e.val.length+1},nativeOn:{mouseenter:function(n){e.enter(t)},mouseleave:function(n){e.leave(t,n)},click:function(n){e.select(t)}}},[n("el-col",{staticClass:"col",staticStyle:{"padding-left":"10px",overflow:"hidden","text-overflow":"ellipsis"},style:{width:t.data?"80%":"100%"},attrs:{menuIndex:e.val.length+1,title:t.label}},[e._v("\n                "+e._s(t.label)+"\n            ")]),e._v(" "),t.data?n("el-col",{staticClass:"col",staticStyle:{width:"20%","text-align":"center","padding-right":"10px",color:"gray"},attrs:{menuIndex:e.val.length+1}},[e._v("\n                >\n            ")]):e._e()],1)})),e._v(" "),e._l(e.arr,function(t,r){return[t.data&&t.data.length>0&&t.select?n("multimenu",{key:String(r),style:{left:"150px",top:0},attrs:{val:e.val.concat(t.value),source:t.data},on:{click:e.click,level:e.level}}):e._e()]})],2)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,n){var r=n(4)(n(23),n(25),null,null);r.options.__file="/Users/sunxin/new/Client/web/component/inputMul.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] inputMul.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},function(e,t,n){"use strict";var r=n(24);e.exports={props:["source","placeholder","hudremove"],data:function(){return{text:this.source,hud:void 0===this.hudremove||Boolean(this.hudremove),showDialog:!1}},directives:{drag:r},methods:{save:function(){this.$emit("save",this.text)}}}},function(e,t,n){(function(t){var n={bind:function(e,n,r){e.draggable=!0;var o=e.getElementsByTagName("textarea")[0];o.placeholder+="(支持将文件拖入输入框内)",e.addEventListener("dragenter",function(e){o.style.backgroundColor="rgba(88,183,255,0.6)",e.stopPropagation(),e.preventDefault()},!1),e.addEventListener("dragleave",function(e){o.style.backgroundColor="white"},!1),e.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),e.addEventListener("drop",function(e){o.style.backgroundColor="white",e.stopPropagation(),e.preventDefault();var i=e.dataTransfer.files[0];if(-1!=i.type.indexOf("text")||-1!=i.type.indexOf("json")||""==i.type){var s=new FileReader;s.onload=function(e){r.context[n.value]=s.result},s.onerror=function(){t.tip("读取文件错误",0)},s.readAsText(i)}else t.tip("文件类型不正确",0)},!1)},unbind:function(e){},update:function(e,t){}};e.exports=n}).call(t,n(1))},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"box",attrs:{title:"DOClever",width:"50%",modal:e.hud,visible:e.showDialog,"append-to-body":""},on:{"update:visible":function(t){e.showDialog=t}}},[n("el-row",{staticClass:"row",staticStyle:{"background-color":"white",height:"100%",padding:"20px"}},[n("el-input",{directives:[{name:"drag",rawName:"v-drag",value:"text",expression:"'text'"}],attrs:{type:"textarea",rows:6,placeholder:e.placeholder},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),n("el-row",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("\n            保存\n        ")])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,n){var r=n(4)(n(27),n(28),null,null);r.options.__file="/Users/sunxin/new/Client/web/component/inputTwo.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] inputTwo.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},function(e,t,n){"use strict";e.exports={props:["name1","name2","placeholder1","placeholder2","text1","text2","hudremove"],data:function(){return{data:{labelTitle:this.name1,labelContent:this.name2,placeholderTitle:this.placeholder1,placeholderContent:this.placeholder2,textTitle:this.text1,textContent:this.text2},hud:void 0===this.hudremove||Boolean(this.hudremove),showDialog:!1}},methods:{save:function(){this.$emit("save",this.data.textTitle,this.data.textContent)}}}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{ref:"box",attrs:{title:"DOClever",size:"50%",modal:e.hud,visible:e.showDialog,"append-to-body":""},on:{"update:visible":function(t){e.showDialog=t}}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:e.data.labelTitle}},[n("el-input",{attrs:{size:"small",placeholder:e.data.placeholderTitle},model:{value:e.data.textTitle,callback:function(t){e.$set(e.data,"textTitle",t)},expression:"data.textTitle"}})],1),e._v(" "),n("el-form-item",{staticStyle:{"text-align":"center"},attrs:{label:e.data.labelContent}},[n("el-input",{attrs:{size:"small",type:"textarea",rows:6,placeholder:e.data.placeholderContent},model:{value:e.data.textContent,callback:function(t){e.$set(e.data,"textContent",t)},expression:"data.textContent"}})],1)],1),e._v(" "),n("el-row",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("\n            保存\n        ")])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},function(e,t,n){(function(t,r,o){var i=n(3),s=n(30);t.use(s);var a={};function u(e){var t={};for(var n in e.map)e.map.hasOwnProperty(n)&&(t[n.toLowerCase()]=e.map[n][0]);return t}function c(e){var t=e||{};return r.get("versionId")&&(t.docleverversion=r.get("versionId")),r.get("snapshotId")&&(t.docleversnapshot=r.get("snapshotId")),t}function l(e){if(e.length>0){for(var t={},n=e.split("\r\n"),r=0;r<n.length;r++){var o=n[r].indexOf(":");o>-1&&(t[n[r].substr(0,o)]=n[r].substr(o+1))}return t}return{}}a.get=function(e,n,o,s,a,u){o=c(o),n||(n={}),n.sbdoctimestamps=(new Date).getTime();let l={headers:o,params:n,before:s,credentials:!0};return u&&(l.timeout=u),t.http.get(a?e:i.baseUrl+e,l).then(function(e){var t=e.body;if(a){if(200!=t.code)throw"error";return t}if(13==t.code)location.href="/html/web/login/login.html";else{if(35!=t.code)return t;r.remove("versionId"),r.remove("versionName"),r.remove("versionDis"),location.reload()}})},a.post=function(e,n,s,a,l,f,h){l||(s=c(s));var d=!1,p=!1;if(s)for(var m in s)if("content-type"==m.toLowerCase()&&(p=!0,"application/x-www-form-urlencoded"==s[m].toLowerCase())){d=!0;break}return n?!d&&p||(n=o.param(n,1),p||(s?s["content-type"]="application/x-www-form-urlencoded":s={"content-type":"application/x-www-form-urlencoded"})):n="",t.http.post(h?e:f?e:i.baseUrl+e,n,{headers:s,before:a,credentials:!0}).then(function(e){if(h)return e.body;if(l){var t;if("string"==typeof e.body){var n=e.body;try{t=JSON.parse(n)}catch(e){t=n}}else{if("object"==typeof e.body&&e.body instanceof Blob&&e.body.size<=5120)return new Promise(function(n,r){var o=new FileReader;o.onload=function(){var r=o.result;if(/application\/xml/i.test(e.headers.map["content-type"][0])||/text\/xml/i.test(e.headers.map["content-type"][0]))t=r;else try{t=JSON.parse(r)}catch(n){t=e.body}var i={data:t,status:e.status,header:u(e.headers)};n(i)},o.onerror=function(r){var o={data:t=e.body,status:e.status,header:u(e.headers)};n(o)},o.readAsText(e.body)});t=e.body}return{data:t,status:e.status,header:u(e.headers)}}var o=e.body;if(13==o.code)location.href="/html/web/login/login.html";else{if(35!=o.code)return o;r.remove("versionId"),r.remove("versionName"),r.remove("versionDis"),location.reload()}},function(e){if(l)return{data:e.body,status:e.status,header:u(e.headers)}})},a.put=function(e,n,s,a,u){var l=!1,f=!1;if(s=c(s))for(var h in s)if("content-type"==h.toLowerCase()&&(f=!0,"application/x-www-form-urlencoded"==s[h].toLowerCase())){l=!0;break}return n?!l&&f||(n=o.param(n,1),f||(s?s["content-type"]="application/x-www-form-urlencoded":s={"content-type":"application/x-www-form-urlencoded"})):n="",t.http.put(u?e:i.baseUrl+e,n,{headers:s,before:a,credentials:!0}).then(function(e){var t=e.body;if(u)return t;if(13==t.code)location.href="/html/web/login/login.html";else{if(35!=t.code)return t;r.remove("versionId"),r.remove("versionName"),r.remove("versionDis"),location.reload()}})},a.delete=function(e,n,o,s,a){return o=c(o),t.http.delete(a?e:i.baseUrl+e,{headers:o,params:n,before:s,credentials:!0}).then(function(e){var t=e.body;if(a)return t;if(13==t.code)location.href="/html/web/login/login.html";else{if(35!=t.code)return t;r.remove("versionId"),r.remove("versionName"),r.remove("versionDis"),location.reload()}})},a.upload=function(e,n,o,s,a,u,f){var h,d;if(u||(s=c(s)),"string"==typeof o||o instanceof ArrayBuffer)if(h=o,s){var p=!1;for(var m in s)if("content-type"==m.toLowerCase()){p=!0;break}if(!p)if("string"==typeof o){var v=!0;try{JSON.parse(o)}catch(e){v=!1}s["content-type"]=v?"application/json":"text/plain"}else s["content-type"]="application/x-www-form-urlencoded"}else if("string"==typeof o){v=!0;try{JSON.parse(o)}catch(e){v=!1}s=v?{"content-type":"application/json"}:{"content-type":"text/plain"}}else s={"content-type":"application/x-www-form-urlencoded"};else for(var m in h=new FormData,o)h.append(m,o[m]);return u?new Promise(function(t,r){var o=new XMLHttpRequest;if(o.withCredentials=!0,o.open(e,f?n:i.baseUrl+n,!0),s)for(var a in s)o.setRequestHeader(a,s[a]);o.onreadystatechange=function(){if(4!=o.readyState);else{var e;if("string"==o.responseType||""==o.responseType||"json"==o.responseType){var n=o.responseText;try{e=JSON.parse(n)}catch(t){e=n}}else{if(("blob"==o.responseType||"arraybuffer"==o.responseType||"document"==o.responseType)&&o.response.size<=5120){var r=new FileReader;return r.onload=function(){var n=r.result;if(/application\/xml/i.test(o.getResponseHeader("content-type"))||/text\/xml/i.test(o.getResponseHeader("content-type")))e=n;else try{e=JSON.parse(n)}catch(t){e=o.response}var i={data:e,status:o.status,header:l(o.getAllResponseHeaders())};t(i)},r.onerror=function(n){var r={data:e=o.response,status:o.status,header:l(o.getAllResponseHeaders())};t(r)},void r.readAsText(o.response)}e=o.response}var i={data:e,status:o.status,header:l(o.getAllResponseHeaders())};t(i)}},o.send(h)}):("post"==e.toLowerCase()?d=t.http.post:"put"==e.toLowerCase()?d=t.http.put:"patch"==e.toLowerCase()&&(d=t.http.patch),d.call(t.http,i.baseUrl+n,h,{headers:s,before:a,credentials:!0}).then(function(e){var t=e.body;if(13==t.code)location.href="/html/web/login/login.html";else{if(35!=t.code)return t;r.remove("versionId"),r.remove("versionName"),r.remove("versionDis"),location.reload()}}))},e.exports=a}).call(t,n(0),n(6),n(1))},function(e,t,n){"use strict";var r=2;function o(e){this.state=r,this.value=void 0,this.deferred=[];var t=this;try{e(function(e){t.resolve(e)},function(e){t.reject(e)})}catch(e){t.reject(e)}}o.reject=function(e){return new o(function(t,n){n(e)})},o.resolve=function(e){return new o(function(t,n){t(e)})},o.all=function(e){return new o(function(t,n){var r=0,i=[];function s(n){return function(o){i[n]=o,(r+=1)===e.length&&t(i)}}0===e.length&&t(i);for(var a=0;a<e.length;a+=1)o.resolve(e[a]).then(s(a),n)})},o.race=function(e){return new o(function(t,n){for(var r=0;r<e.length;r+=1)o.resolve(e[r]).then(t,n)})};var i=o.prototype;function s(e,t){e instanceof Promise?this.promise=e:this.promise=new Promise(e.bind(t)),this.context=t}i.resolve=function(e){var t=this;if(t.state===r){if(e===t)throw new TypeError("Promise settled with itself.");var n=!1;try{var o=e&&e.then;if(null!==e&&"object"==typeof e&&"function"==typeof o)return void o.call(e,function(e){n||t.resolve(e),n=!0},function(e){n||t.reject(e),n=!0})}catch(e){return void(n||t.reject(e))}t.state=0,t.value=e,t.notify()}},i.reject=function(e){if(this.state===r){if(e===this)throw new TypeError("Promise settled with itself.");this.state=1,this.value=e,this.notify()}},i.notify=function(){var e,t,n=this;e=function(){if(n.state!==r)for(;n.deferred.length;){var e=n.deferred.shift(),t=e[0],o=e[1],i=e[2],s=e[3];try{0===n.state?i("function"==typeof t?t.call(void 0,n.value):n.value):1===n.state&&("function"==typeof o?i(o.call(void 0,n.value)):s(n.value))}catch(e){s(e)}}},c.nextTick(e,t)},i.then=function(e,t){var n=this;return new o(function(r,o){n.deferred.push([e,t,r,o]),n.notify()})},i.catch=function(e){return this.then(void 0,e)},"undefined"==typeof Promise&&(window.Promise=o),s.all=function(e,t){return new s(Promise.all(e),t)},s.resolve=function(e,t){return new s(Promise.resolve(e),t)},s.reject=function(e,t){return new s(Promise.reject(e),t)},s.race=function(e,t){return new s(Promise.race(e),t)};var a=s.prototype;a.bind=function(e){return this.context=e,this},a.then=function(e,t){return e&&e.bind&&this.context&&(e=e.bind(this.context)),t&&t.bind&&this.context&&(t=t.bind(this.context)),new s(this.promise.then(e,t),this.context)},a.catch=function(e){return e&&e.bind&&this.context&&(e=e.bind(this.context)),new s(this.promise.catch(e),this.context)},a.finally=function(e){return this.then(function(t){return e.call(this),t},function(t){return e.call(this),Promise.reject(t)})};var u=!1,c={},l={}.hasOwnProperty,f=[].slice,h="undefined"!=typeof window,d=function(e){c=e.util,u=e.config.debug||!e.config.silent};function p(e){return e?e.replace(/^\s*|\s*$/g,""):""}function m(e){return e?e.toLowerCase():""}var v=Array.isArray;function g(e){return"string"==typeof e}function y(e){return"function"==typeof e}function b(e){return null!==e&&"object"==typeof e}function w(e){return b(e)&&Object.getPrototypeOf(e)==Object.prototype}function x(e,t,n){var r=s.resolve(e);return arguments.length<2?r:r.then(t,n)}function _(e,t,n){return y(n=n||{})&&(n=n.call(t)),T(e.bind({$vm:t,$options:n}),e,{$options:n})}function E(e,t){var n,r;if(v(e))for(n=0;n<e.length;n++)t.call(e[n],e[n],n);else if(b(e))for(r in e)l.call(e,r)&&t.call(e[r],e[r],r);return e}var k=Object.assign||function(e){return f.call(arguments,1).forEach(function(t){C(e,t)}),e};function T(e){return f.call(arguments,1).forEach(function(t){C(e,t,!0)}),e}function C(e,t,n){for(var r in t)n&&(w(t[r])||v(t[r]))?(w(t[r])&&!w(e[r])&&(e[r]={}),v(t[r])&&!v(e[r])&&(e[r]=[]),C(e[r],t[r],n)):void 0!==t[r]&&(e[r]=t[r])}function j(e,t,n){var r=function(e){var t=["+","#",".","/",";","?","&"],n=[];return{vars:n,expand:function(r){return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(e,o,i){if(o){var s=null,a=[];if(-1!==t.indexOf(o.charAt(0))&&(s=o.charAt(0),o=o.substr(1)),o.split(/,/g).forEach(function(e){var t=/([^:\*]*)(?::(\d+)|(\*))?/.exec(e);a.push.apply(a,function(e,t,n,r){var o=e[n],i=[];if(S(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),r&&"*"!==r&&(o=o.substring(0,parseInt(r,10))),i.push(I(t,o,O(t)?n:null));else if("*"===r)Array.isArray(o)?o.filter(S).forEach(function(e){i.push(I(t,e,O(t)?n:null))}):Object.keys(o).forEach(function(e){S(o[e])&&i.push(I(t,o[e],e))});else{var s=[];Array.isArray(o)?o.filter(S).forEach(function(e){s.push(I(t,e))}):Object.keys(o).forEach(function(e){S(o[e])&&(s.push(encodeURIComponent(e)),s.push(I(t,o[e].toString())))}),O(t)?i.push(encodeURIComponent(n)+"="+s.join(",")):0!==s.length&&i.push(s.join(","))}else";"===t?i.push(encodeURIComponent(n)):""!==o||"&"!==t&&"?"!==t?""===o&&i.push(""):i.push(encodeURIComponent(n)+"=");return i}(r,s,t[1],t[2]||t[3])),n.push(t[1])}),s&&"+"!==s){var u=",";return"?"===s?u="&":"#"!==s&&(u=s),(0!==a.length?s:"")+a.join(u)}return a.join(",")}return A(i)})}}}(e),o=r.expand(t);return n&&n.push.apply(n,r.vars),o}function S(e){return void 0!==e&&null!==e}function O(e){return";"===e||"&"===e||"?"===e}function I(e,t,n){return t="+"===e||"#"===e?A(t):encodeURIComponent(t),n?encodeURIComponent(n)+"="+t:t}function A(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e)),e}).join("")}function R(e,t){var n,r=this||{},o=e;return g(e)&&(o={url:e,params:t}),o=T({},R.options,r.$options,o),R.transforms.forEach(function(e){n=function(e,t,n){return function(r){return e.call(n,r,t)}}(e,n,r.$vm)}),n(o)}R.options={url:"",root:null,params:{}},R.transforms=[function(e){var t=[],n=j(e.url,e.params,t);return t.forEach(function(t){delete e.params[t]}),n},function(e,t){var n=Object.keys(R.options.params),r={},o=t(e);return E(e.params,function(e,t){-1===n.indexOf(t)&&(r[t]=e)}),(r=R.params(r))&&(o+=(-1==o.indexOf("?")?"?":"&")+r),o},function(e,t){var n=t(e);return g(e.root)&&!n.match(/^(https?:)?\//)&&(n=e.root+"/"+n),n}],R.params=function(e){var t=[],n=encodeURIComponent;return t.add=function(e,t){y(t)&&(t=t()),null===t&&(t=""),this.push(n(e)+"="+n(t))},function e(t,n,r){var o,i=v(n),s=w(n);E(n,function(n,a){o=b(n)||v(n),r&&(a=r+"["+(s||o?a:"")+"]"),!r&&i?t.add(n.name,n.value):o?e(t,n,a):t.add(a,n)})}(t,e),t.join("&").replace(/%20/g,"+")},R.parse=function(e){var t=document.createElement("a");return document.documentMode&&(t.href=e,e=t.href),t.href=e,{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",port:t.port,host:t.host,hostname:t.hostname,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):""}};var P=function(e){return new s(function(t){var n=new XDomainRequest,r=function(r){var o=r.type,i=0;"load"===o?i=200:"error"===o&&(i=500),t(e.respondWith(n.responseText,{status:i}))};e.abort=function(){return n.abort()},n.open(e.method,e.getUrl()),e.timeout&&(n.timeout=e.timeout),n.onload=r,n.onabort=r,n.onerror=r,n.ontimeout=r,n.onprogress=function(){},n.send(e.getBody())})},D=h&&"withCredentials"in new XMLHttpRequest;var L=function(e){return new s(function(t){var n,r,o=e.jsonp||"callback",i=e.jsonpCallback||"_jsonp"+Math.random().toString(36).substr(2),s=null;n=function(n){var o=n.type,a=0;"load"===o&&null!==s?a=200:"error"===o&&(a=500),a&&window[i]&&(delete window[i],document.body.removeChild(r)),t(e.respondWith(s,{status:a}))},window[i]=function(e){s=JSON.stringify(e)},e.abort=function(){n({type:"abort"})},e.params[o]=i,e.timeout&&setTimeout(e.abort,e.timeout),(r=document.createElement("script")).src=e.getUrl(),r.type="text/javascript",r.async=!0,r.onload=n,r.onerror=n,document.body.appendChild(r)})},U="undefined"!=typeof Blob&&"undefined"!=typeof FileReader,N=function(e){return new s(function(t){var n=new XMLHttpRequest,r=function(r){var o=e.respondWith("response"in n?n.response:n.responseText,{status:1223===n.status?204:n.status,statusText:1223===n.status?"No Content":p(n.statusText)});E(p(n.getAllResponseHeaders()).split("\n"),function(e){o.headers.append(e.slice(0,e.indexOf(":")),e.slice(e.indexOf(":")+1))}),t(o)};e.abort=function(){return n.abort()},e.progress&&("GET"===e.method?n.addEventListener("progress",e.progress):/^(POST|PUT)$/i.test(e.method)&&n.upload.addEventListener("progress",e.progress)),n.open(e.method,e.getUrl(),!0),e.timeout&&(n.timeout=e.timeout),!0===e.credentials&&(n.withCredentials=!0),e.crossOrigin||e.headers.set("X-Requested-With","XMLHttpRequest"),"responseType"in n&&U&&(n.responseType="blob"),e.headers.forEach(function(e,t){n.setRequestHeader(t,e)}),n.onload=r,n.onabort=r,n.onerror=r,n.ontimeout=r,n.send(e.getBody())})},$=function(e){var t=n(31);return new s(function(n){var r,o=e.getUrl(),i=e.getBody(),s=e.method,a={};e.headers.forEach(function(e,t){a[t]=e}),t(o,{body:i,method:s,headers:a}).then(r=function(t){var r=e.respondWith(t.body,{status:t.statusCode,statusText:p(t.statusMessage)});E(t.headers,function(e,t){r.headers.set(t,e)}),n(r)},function(e){return r(e.response)})})},M=function(e){var t,n=[B],r=[];function o(o){return new s(function(i){function s(){var r;y(t=n.pop())?t.call(e,o,a):(r="Invalid interceptor of type "+typeof t+", must be a function","undefined"!=typeof console&&u&&console.warn("[VueResource warn]: "+r),a())}function a(t){if(y(t))r.unshift(t);else if(b(t))return r.forEach(function(n){t=x(t,function(t){return n.call(e,t)||t})}),void x(t,i);s()}s()},e)}return b(e)||(e=null),o.use=function(e){n.push(e)},o};function B(e,t){t((e.client||(h?N:$))(e))}var q=function(e){var t=this;this.map={},E(e,function(e,n){return t.append(n,e)})};function F(e,t){return Object.keys(e).reduce(function(e,n){return m(t)===m(n)?n:e},null)}q.prototype.has=function(e){return null!==F(this.map,e)},q.prototype.get=function(e){var t=this.map[F(this.map,e)];return t?t[0]:null},q.prototype.getAll=function(e){return this.map[F(this.map,e)]||[]},q.prototype.set=function(e,t){this.map[function(e){if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return p(e)}(F(this.map,e)||e)]=[p(t)]},q.prototype.append=function(e,t){var n=this.getAll(e);n.length?n.push(p(t)):this.set(e,t)},q.prototype.delete=function(e){delete this.map[F(this.map,e)]},q.prototype.deleteAll=function(){this.map={}},q.prototype.forEach=function(e,t){var n=this;E(this.map,function(r,o){E(r,function(r){return e.call(t,r,o,n)})})};var H=function(e,t){var n=t.url,r=t.headers,o=t.status,i=t.statusText;this.url=n,this.ok=o>=200&&o<300,this.status=o||0,this.statusText=i||"",this.headers=new q(r),this.body=e,g(e)?this.bodyText=e:"undefined"!=typeof Blob&&e instanceof Blob&&(this.bodyBlob=e,function(e){return 0===e.type.indexOf("text")||-1!==e.type.indexOf("json")}(e)&&(this.bodyText=function(e){return new s(function(t){var n=new FileReader;n.readAsText(e),n.onload=function(){t(n.result)}})}(e)))};H.prototype.blob=function(){return x(this.bodyBlob)},H.prototype.text=function(){return x(this.bodyText)},H.prototype.json=function(){return x(this.text(),function(e){return JSON.parse(e)})};var K=function(e){var t;this.body=null,this.params={},k(this,e,{method:(t=e.method||"GET",t?t.toUpperCase():"")}),this.headers instanceof q||(this.headers=new q(this.headers))};K.prototype.getUrl=function(){return R(this)},K.prototype.getBody=function(){return this.body},K.prototype.respondWith=function(e,t){return new H(e,k(t||{},{url:this.getUrl()}))};var z={"Content-Type":"application/json;charset=utf-8"};function V(e){var t=this||{},n=M(t.$vm);return function(e){f.call(arguments,1).forEach(function(t){for(var n in t)void 0===e[n]&&(e[n]=t[n])})}(e||{},t.$options,V.options),V.interceptors.forEach(function(e){n.use(e)}),n(new K(e)).then(function(e){return e.ok?e:s.reject(e)},function(e){var t;return e instanceof Error&&(t=e,"undefined"!=typeof console&&console.error(t)),s.reject(e)})}function W(e,t,n,r){var o=this||{},i={};return E(n=k({},W.actions,n),function(n,s){n=T({url:e,params:k({},t)},r,n),i[s]=function(){return(o.$http||V)(function(e,t){var n,r=k({},e),o={};switch(t.length){case 2:o=t[0],n=t[1];break;case 1:/^(POST|PUT|PATCH)$/i.test(r.method)?n=t[0]:o=t[0];break;case 0:break;default:throw"Expected up to 2 arguments [params, body], got "+t.length+" arguments"}return r.body=n,r.params=k({},r.params,o),r}(n,arguments))}}),i}function G(e){G.installed||(d(e),e.url=R,e.http=V,e.resource=W,e.Promise=s,Object.defineProperties(e.prototype,{$url:{get:function(){return _(e.url,this,this.$options.url)}},$http:{get:function(){return _(e.http,this,this.$options.http)}},$resource:{get:function(){return e.resource.bind(this)}},$promise:{get:function(){var t=this;return function(n){return new e.Promise(n,t)}}}}))}V.options={},V.headers={put:z,post:z,patch:z,delete:z,common:{Accept:"application/json, text/plain, */*"},custom:{}},V.interceptors=[function(e,t){y(e.before)&&e.before.call(this,e),t()},function(e,t){e.emulateHTTP&&/^(PUT|PATCH|DELETE)$/i.test(e.method)&&(e.headers.set("X-HTTP-Method-Override",e.method),e.method="POST"),t()},function(e,t){var n;n=e.body,"undefined"!=typeof FormData&&n instanceof FormData?e.headers.delete("Content-Type"):(b(e.body)||v(e.body))&&(e.emulateJSON?(e.body=R.params(e.body),e.headers.set("Content-Type","application/x-www-form-urlencoded")):e.body=JSON.stringify(e.body)),t(function(e){return Object.defineProperty(e,"data",{get:function(){return this.body},set:function(e){this.body=e}}),e.bodyText?x(e.text(),function(t){var n,r;if(0===(e.headers.get("Content-Type")||"").indexOf("application/json")||(r=(n=t).match(/^\[|^\{(?!\{)/))&&{"[":/]$/,"{":/}$/}[r[0]].test(n))try{e.body=JSON.parse(t)}catch(t){e.body=null}else e.body=t;return e}):e})},function(e,t){"JSONP"==e.method&&(e.client=L),t()},function(e,t){E(k({},V.headers.common,e.crossOrigin?{}:V.headers.custom,V.headers[m(e.method)]),function(t,n){e.headers.has(n)||e.headers.set(n,t)}),t()},function(e,t){if(h){var n=R.parse(location.href),r=R.parse(e.getUrl());r.protocol===n.protocol&&r.host===n.host||(e.crossOrigin=!0,e.emulateHTTP=!1,D||(e.client=P))}t()}],["get","delete","head","jsonp"].forEach(function(e){V[e]=function(t,n){return this(k(n||{},{url:t,method:e}))}}),["post","put","patch"].forEach(function(e){V[e]=function(t,n,r){return this(k(r||{},{url:t,method:e,body:n}))}}),W.actions={get:{method:"GET"},save:{method:"POST"},query:{method:"GET"},update:{method:"PUT"},remove:{method:"DELETE"},delete:{method:"DELETE"}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(G),e.exports=G},function(e,t,n){"use strict";const r=n(32),o=n(33),i=n(34),s=n(2).PassThrough,a=n(7),u=n(35),c=n(36),l=n(37),f=n(38),h=n(42),d=n(43),p=n(45),m=n(46),v=n(47),g=n(49),y=n(51),b=n(52).Buffer,w=n(54);function x(e){e=e||{};const t=new r,n=e.href||a.resolve(a.format(e),e.path);let s,u=0,c=0;const l=e=>{const r=("https:"===e.protocol?i:o).request(e,o=>{const i=o.statusCode;if(m(i)&&e.followRedirect&&"location"in o.headers&&("GET"===e.method||"HEAD"===e.method)){if(o.resume(),++u>10)return void t.emit("error",new E.MaxRedirectsError(i,e),null,o);const n=b.from(o.headers.location,"binary").toString();s=a.resolve(a.format(e),n);const r=Object.assign({},e,a.parse(s));return t.emit("redirect",o,r),void l(r)}setImmediate(()=>{const e="function"==typeof v&&"HEAD"!==r.method?v(o):o;e.url=s||n,e.requestUrl=n,t.emit("response",e)})});r.once("error",n=>{const r=e.retries(++c,n);r?setTimeout(l,r,e):t.emit("error",new E.RequestError(n,e))}),e.gotTimeout&&h(r,e.gotTimeout),setImmediate(()=>{t.emit("request",r)})};return l(e),t}function _(e,t){if("string"!=typeof e&&"object"!=typeof e)throw new Error(`Parameter \`url\` must be a string or object, not ${typeof e}`);if("string"==typeof e&&(e=e.replace(/^unix:/,"http://$&"),(e=d(e)).auth))throw new Error("Basic authentication must be done with auth option");(t=Object.assign({protocol:"http:",path:"",retries:5},e,t)).headers=Object.assign({"user-agent":`${w.name}/${w.version} (https://github.com/sindresorhus/got)`,"accept-encoding":"gzip,deflate"},p(t.headers));const n=t.query;n&&("string"!=typeof n&&(t.query=u.stringify(n)),t.path=`${t.path.split("?")[0]}?${t.query}`,delete t.query),t.json&&void 0===t.headers.accept&&(t.headers.accept="application/json");let r=t.body;if(r){if("string"!=typeof r&&(null===r||"object"!=typeof r))throw new Error("options.body must be a ReadableStream, string, Buffer or plain Object");if(t.method=t.method||"POST",l(r)&&"function"==typeof r.getBoundary?t.headers["content-type"]=t.headers["content-type"]||`multipart/form-data; boundary=${r.getBoundary()}`:null===r||"object"!=typeof r||b.isBuffer(r)||l(r)||(t.headers["content-type"]=t.headers["content-type"]||"application/x-www-form-urlencoded",r=t.body=u.stringify(r)),void 0===t.headers["content-length"]&&void 0===t.headers["transfer-encoding"]&&!l(r)){const e="string"==typeof r?b.byteLength(r):r.length;t.headers["content-length"]=e}}if(t.method=(t.method||"GET").toUpperCase(),"unix"===t.hostname){const e=/(.+):(.+)/.exec(t.path);e&&(t.socketPath=e[1],t.path=e[2],t.host=null)}if("function"!=typeof t.retries){const e=t.retries;t.retries=((t,n)=>{if(t>e||!y(n))return 0;return 1e3*(1<<t)+100*Math.random()})}return void 0===t.followRedirect&&(t.followRedirect=!0),t.timeout&&(t.gotTimeout=t.timeout,delete t.timeout),t}function E(e,t){try{return function(e){return new Promise((t,n)=>{const r=x(e);r.on("request",t=>{if(l(e.body))return e.body.pipe(t),void(e.body=void 0);t.end(e.body)}),r.on("response",r=>{(null===e.encoding?f.buffer(r):f(r,e)).catch(t=>n(new E.ReadError(t,e))).then(n=>{const o=r.statusCode,i=e.followRedirect?299:399;if(r.body=n,e.json&&r.body)try{r.body=JSON.parse(r.body)}catch(t){throw new E.ParseError(t,o,e,n)}if(o<200||o>i)throw new E.HTTPError(o,e);t(r)}).catch(e=>{Object.defineProperty(e,"response",{value:r}),n(e)})}),r.on("error",n)})}(_(e,t))}catch(e){return Promise.reject(e)}}const k=["get","post","put","patch","head","delete"];k.forEach(e=>{E[e]=((t,n)=>E(t,Object.assign({},n,{method:e})))}),E.stream=((e,t)=>(function(e){const t=new s,n=new s,r=c(t,n);if(e.json)throw new Error("got can not be used as stream when options.json is used");e.body&&(r.write=(()=>{throw new Error("got's stream is not writable when options.body is used")}));const o=x(e);return o.on("request",n=>{r.emit("request",n),l(e.body)?e.body.pipe(n):e.body?n.end(e.body):"POST"!==e.method&&"PUT"!==e.method&&"PATCH"!==e.method?n.end():t.pipe(n)}),o.on("response",t=>{const o=t.statusCode;t.pipe(n),o<200||o>299?r.emit("error",new E.HTTPError(o,e),null,t):r.emit("response",t)}),o.on("redirect",r.emit.bind(r,"redirect")),o.on("error",r.emit.bind(r,"error")),r})(_(e,t)));for(const e of k)E.stream[e]=((t,n)=>E.stream(t,Object.assign({},n,{method:e})));function T(e,t){void 0!==e.code&&(this.code=e.code),Object.assign(this,{message:e.message,host:t.host,hostname:t.hostname,method:t.method,path:t.path})}E.RequestError=g("RequestError",T),E.ReadError=g("ReadError",T),E.ParseError=g("ParseError",function(e,t,n,r){T.call(this,e,n),this.statusCode=t,this.statusMessage=o.STATUS_CODES[this.statusCode],this.message=`${e.message} in "${a.format(n)}": \n${r.slice(0,77)}...`}),E.HTTPError=g("HTTPError",function(e,t){T.call(this,{},t),this.statusCode=e,this.statusMessage=o.STATUS_CODES[this.statusCode],this.message=`Response code ${this.statusCode} (${this.statusMessage})`}),E.MaxRedirectsError=g("MaxRedirectsError",function(e,t){T.call(this,{},t),this.statusCode=e,this.statusMessage=o.STATUS_CODES[this.statusCode],this.message="Redirected 10 times. Aborting."}),e.exports=E},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("querystring")},function(e,t,n){"use strict";var r=n(2);function o(e,t,n){void 0===n&&(n=t,t=e,e=null),r.Duplex.call(this,e),"function"!=typeof n.read&&(n=new r.Readable(e).wrap(n)),this._writable=t,this._readable=n,this._waiting=!1;var o=this;t.once("finish",function(){o.end()}),this.once("finish",function(){t.end()}),n.on("readable",function(){o._waiting&&(o._waiting=!1,o._read())}),n.once("end",function(){o.push(null)}),e&&void 0!==e.bubbleErrors&&!e.bubbleErrors||(t.on("error",function(e){o.emit("error",e)}),n.on("error",function(e){o.emit("error",e)}))}o.prototype=Object.create(r.Duplex.prototype,{constructor:{value:o}}),o.prototype._write=function(e,t,n){this._writable.write(e,t,n)},o.prototype._read=function(){for(var e,t=0;null!==(e=this._readable.read());)this.push(e),t++;0===t&&(this._waiting=!0)},e.exports=function(e,t,n){return new o(e,t,n)},e.exports.DuplexWrapper=o},function(e,t,n){"use strict";var r=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};r.writable=function(e){return r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},r.readable=function(e){return r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},r.duplex=function(e){return r.writable(e)&&r.readable(e)},r.transform=function(e){return r.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t,n){"use strict";var r=n(39),o=n(8),i=n(41);function s(e,t){if(!e)return r.reject(new Error("Expected a stream"));var n,s,a=(t=o({maxBuffer:1/0},t)).maxBuffer,u=new r(function(r,o){function u(e){e&&(e.bufferedData=n.getBufferedValue()),o(e)}n=i(t),e.once("error",u),e.pipe(n),n.on("data",function(){n.getBufferedLength()>a&&o(new Error("maxBuffer exceeded"))}),n.once("error",u),n.on("end",r),s=function(){e.unpipe&&e.unpipe(n)}});return u.then(s,s),u.then(function(){return n.getBufferedValue()})}e.exports=s,e.exports.buffer=function(e,t){return s(e,o({},t,{encoding:"buffer"}))},e.exports.array=function(e,t){return s(e,o({},t,{array:!0}))}},function(e,t,n){"use strict";e.exports="function"==typeof Promise?Promise:n(40)},function(e,t,n){"use strict";var r,o="pending",i="settled",s="fulfilled",a="rejected",u=function(){},c="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,l="undefined"==typeof setImmediate?setTimeout:setImmediate,f=[];function h(){for(var e=0;e<f.length;e++)f[e][0](f[e][1]);f=[],r=!1}function d(e,t){f.push([e,t]),r||(r=!0,l(h,0))}function p(e){var t=e.owner,n=t._state,r=t._data,o=e[n],i=e.then;if("function"==typeof o){n=s;try{r=o(r)}catch(e){y(i,e)}}m(i,r)||(n===s&&v(i,r),n===a&&y(i,r))}function m(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t===r?g(e,r):v(e,r))},function(t){n||(n=!0,y(e,t))}),!0}}catch(t){return n||y(e,t),!0}return!1}function v(e,t){e!==t&&m(e,t)||g(e,t)}function g(e,t){e._state===o&&(e._state=i,e._data=t,d(w,e))}function y(e,t){e._state===o&&(e._state=i,e._data=t,d(x,e))}function b(e){e._then=e._then.forEach(p)}function w(e){e._state=s,b(e)}function x(e){e._state=a,b(e),!e._handled&&c&&global.process.emit("unhandledRejection",e._data,e)}function _(e){global.process.emit("rejectionHandled",e)}function E(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof E==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){y(t,e)}try{e(function(e){v(t,e)},n)}catch(e){n(e)}}(e,this)}E.prototype={constructor:E,_state:o,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(u),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===a&&c&&d(_,this)),this._state===s||this._state===a?d(p,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},E.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new E(function(t,n){var r=[],o=0;function i(e){return o++,function(n){r[e]=n,--o||t(r)}}for(var s,a=0;a<e.length;a++)(s=e[a])&&"function"==typeof s.then?s.then(i(a),n):r[a]=s;o||t(r)})},E.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new E(function(t,n){for(var r,o=0;o<e.length;o++)(r=e[o])&&"function"==typeof r.then?r.then(t,n):t(r)})},E.resolve=function(e){return e&&"object"==typeof e&&e.constructor===E?e:new E(function(t){t(e)})},E.reject=function(e){return new E(function(t,n){n(e)})},e.exports=E},function(e,t,n){var r=n(2).PassThrough,o=n(8);e.exports=function(e){var t=(e=o({},e)).array,n=e.encoding,i="buffer"===n,s=!1;t?s=!(n||i):n=n||"utf8",i&&(n=null);var a=0,u=[],c=new r({objectMode:s});return n&&c.setEncoding(n),c.on("data",function(e){u.push(e),s?a=u.length:a+=e.length}),c.getBufferedValue=function(){return t?u:i?Buffer.concat(u,a):u.join("")},c.getBufferedLength=function(){return a},c}},function(e,t,n){"use strict";e.exports=function(e,t){if(e.timeoutTimer)return e;var n=isNaN(t)?t:{socket:t,connect:t},r=e._headers?" to "+e._headers.host:"";function o(){e.timeoutTimer&&(clearTimeout(e.timeoutTimer),e.timeoutTimer=null)}function i(){o(),void 0!==n.socket&&e.setTimeout(n.socket,function(){e.abort();var t=new Error("Socket timed out on request"+r);t.code="ESOCKETTIMEDOUT",e.emit("error",t)})}return void 0!==n.connect&&(e.timeoutTimer=setTimeout(function(){e.abort();var t=new Error("Connection timed out on request"+r);t.code="ETIMEDOUT",e.emit("error",t)},n.connect)),e.on("socket",function(e){e.connecting||e._connecting?e.once("connect",i):i()}),e.on("error",o)}},function(e,t,n){"use strict";var r=n(7),o=n(44);e.exports=function(e){var t=o(e),n=r.parse(t);return t!==e&&(n.protocol=null),n}},function(e,t,n){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return e=e.trim(),/^\.*\/|^(?!localhost)\w+:/.test(e)?e:e.replace(/^(?!(?:\w+:)?\/\/)/,"http://")}},function(e,t,n){"use strict";e.exports=function(e){for(var t={},n=Object.keys(Object(e)),r=0;r<n.length;r++)t[n[r].toLowerCase()]=e[n[r]];return t}},function(e,t,n){"use strict";e.exports=function(e){if("number"!=typeof e)throw new TypeError("Expected a number");return 300===e||301===e||302===e||303===e||305===e||307===e||308===e}},function(e,t,n){"use strict";const r=n(2).PassThrough,o=n(48);e.exports=(e=>{if(-1===["gzip","deflate"].indexOf(e.headers["content-encoding"]))return e;const t=o.createUnzip(),n=new r;return n.httpVersion=e.httpVersion,n.headers=e.headers,n.rawHeaders=e.rawHeaders,n.trailers=e.trailers,n.rawTrailers=e.rawTrailers,n.setTimeout=e.setTimeout.bind(e),n.statusCode=e.statusCode,n.statusMessage=e.statusMessage,n.socket=e.socket,t.on("error",e=>{"Z_BUF_ERROR"!==e.code?n.emit("error",e):n.end()}),e.pipe(t).pipe(n),n})},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";var r=n(50);e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected className to be a string");if(/[^0-9a-zA-Z_$]/.test(e))throw new Error("className contains invalid characters");t=t||function(e){this.message=e};var n,o,i=function(){Object.defineProperty(this,"name",{configurable:!0,value:e,writable:!0}),r(this,this.constructor),t.apply(this,arguments)};return n=i,o=Error,n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i}},function(e,t,n){"use strict";e.exports=Error.captureStackTrace||function(e){var t=new Error;Object.defineProperty(e,"stack",{configurable:!0,get:function(){var e=t.stack;return Object.defineProperty(this,"stack",{value:e}),e}})}},function(e,t,n){"use strict";var r=["ETIMEDOUT","ECONNRESET","EADDRINUSE","ESOCKETTIMEDOUT","ECONNREFUSED","EPIPE"],o=["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED"];e.exports=function(e){return!e||!e.code||(-1!==r.indexOf(e.code)||-1===o.indexOf(e.code))}},function(e,t,n){var r=n(53),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(o,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){e.exports=require("buffer")},function(e,t){e.exports={_args:[["got@6.7.1","/Users/sunxin/new/Client"]],_from:"got@6.7.1",_id:"got@6.7.1",_inBundle:!1,_integrity:"sha1-JAzQV4WpoY5WHcG0S0HHY+8ejbA=",_location:"/got",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"got@6.7.1",name:"got",escapedName:"got",rawSpec:"6.7.1",saveSpec:null,fetchSpec:"6.7.1"},_requiredBy:["/vue-resource"],_resolved:"https://registry.npmjs.org/got/-/got-6.7.1.tgz",_spec:"6.7.1",_where:"/Users/sunxin/new/Client",ava:{concurrency:4},browser:{"unzip-response":!1},bugs:{url:"https://github.com/sindresorhus/got/issues"},dependencies:{"create-error-class":"^3.0.0",duplexer3:"^0.1.4","get-stream":"^3.0.0","is-redirect":"^1.0.0","is-retry-allowed":"^1.0.0","is-stream":"^1.0.0","lowercase-keys":"^1.0.0","safe-buffer":"^5.0.1","timed-out":"^4.0.0","unzip-response":"^2.0.1","url-parse-lax":"^1.0.0"},description:"Simplified HTTP requests",devDependencies:{ava:"^0.17.0",coveralls:"^2.11.4","form-data":"^2.1.1","get-port":"^2.0.0","into-stream":"^3.0.0",nyc:"^10.0.0",pem:"^1.4.4",pify:"^2.3.0",tempfile:"^1.1.1",xo:"*"},engines:{node:">=4"},files:["index.js"],homepage:"https://github.com/sindresorhus/got#readme",keywords:["http","https","get","got","url","uri","request","util","utility","simple","curl","wget","fetch"],license:"MIT",maintainers:[{name:"Sindre Sorhus",email:"sindresorhus@gmail.com",url:"sindresorhus.com"},{name:"Vsevolod Strukchinsky",email:"floatdrop@gmail.com",url:"github.com/floatdrop"}],name:"got",repository:{type:"git",url:"git+https://github.com/sindresorhus/got.git"},scripts:{coveralls:"nyc report --reporter=text-lcov | coveralls",test:"xo && nyc ava"},version:"6.7.1",xo:{esnext:!0}}},function(e,t,n){const r=n(56).default,o=n(57);e.exports=new function(){let e=new r("doclever");e.version(1).stores({env:"id,name,url",member:"user,pass"}),this.addEnv=async function(t,n,r){await this.getAllEnv();let i={name:n,url:r};return i.id=t||o(),await e.env.put(i),i},this.delEnv=function(t){return e.env.delete(t)},this.getAllEnv=function(){return e.env.toArray()},this.getEnv=function(t){return e.env.get(t)},this.editMember=async function(t,n){let r,o=await e.member.toArray();for(let e of o)if(e.user==t){r=e;break}r?(r.pass=n,await e.member.put(r)):(r={user:t,pass:n},await e.member.put(r))},this.getAllMember=function(){return e.member.toArray()},this.removeMember=function(t){return e.env.delete(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.keys,o=Array.isArray,i="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function s(e,t){return"object"!=typeof t?e:(r(t).forEach(function(n){e[n]=t[n]}),e)}var a=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function l(e,t){"function"==typeof t&&(t=t(a(e))),r(t).forEach(function(n){h(e,n,t[n])})}var f=Object.defineProperty;function h(e,t,n,r){f(e,t,s(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function d(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:l.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor;var m=[].slice;function v(e,t,n){return m.call(e,t,n)}function g(e,t){return t(e)}function y(e){if(!e)throw new Error("Assertion Failed")}function b(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function x(e,t){return function(){try{e.apply(this,arguments)}catch(e){t(e)}}}function _(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}function E(e,t){if(c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=E(e,t[r]);n.push(i)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:E(a,t.substr(s+1))}}function k(e,t,n){if(e&&void 0!==t&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){y("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)k(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var s=t.substr(0,i),a=t.substr(i+1);if(""===a)void 0===n?delete e[s]:e[s]=n;else{var u=e[s];u||(u=e[s]={}),k(u,a,n)}}else void 0===n?delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var C=[].concat;function j(e){return C.apply([],e)}var S="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(j([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}).map(function(e){return i[e]});function O(e){if(!e||"object"!=typeof e)return e;var t;if(o(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(O(e[n]))}else if(S.indexOf(e.constructor)>=0)t=e;else for(var i in t=e.constructor?Object.create(e.constructor.prototype):{},e)c(e,i)&&(t[i]=O(e[i]));return t}function I(e,t,n,o){return n=n||{},o=o||"",r(e).forEach(function(r){if(c(t,r)){var i=e[r],s=t[r];"object"==typeof i&&"object"==typeof s&&i&&s&&""+i.constructor==""+s.constructor?I(i,s,n,o+r+"."):i!==s&&(n[o+r]=t[r])}else n[o+r]=void 0}),r(t).forEach(function(r){c(e,r)||(n[o+r]=t[r])}),n}var A="undefined"!=typeof Symbol&&Symbol.iterator,R=A?function(e){var t;return null!=e&&(t=e[A])&&t.apply(e)}:function(){return null},P={};function D(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===P&&"string"==typeof e)return[e];if(i=R(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var L="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function U(e,t){L=e,N=t}var N=function(){return!0},$=!new Error("").stack;function M(){if($)try{throw M.arguments,new Error}catch(e){return e}return new Error}function B(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(N).map(function(e){return"\n"+e}).join("")):""}var q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(q),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function K(e,t){this._e=M(),this.name=e,this.message=t}function z(e,t,n,r){this._e=M(),this.failures=t,this.failedKeys=r,this.successCount=n}function V(e,t){this._e=M(),this.name="BulkError",this.failures=t,this.message=function(e,t){return e+". Errors: "+t.map(function(e){return e.toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}(e,t)}d(K).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+B(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(z).from(K),d(V).from(K);var W=F.reduce(function(e,t){return e[t]=t+"Error",e},{}),G=K,J=F.reduce(function(e,t){var n=t+"Error";function r(e,r){this._e=M(),this.name=n,e?"string"==typeof e?(this.message=e,this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=H[t]||n,this.inner=null)}return d(r).from(G),e[t]=r,e},{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var Y=q.reduce(function(e,t){return e[t+"Error"]=J[t],e},{});var X=F.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=J[t]),e},{});function Q(){}function Z(e){return e}function ee(e,t){return null==e||e===Z?t:function(n){return t(e(n))}}function te(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ne(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?te(r,this.onsuccess):r),o&&(this.onerror=this.onerror?te(o,this.onerror):o),void 0!==i?i:n}}function re(e,t){return e===Q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?te(n,this.onsuccess):n),r&&(this.onerror=this.onerror?te(r,this.onerror):r)}}function oe(e,t){return e===Q?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?te(o,this.onsuccess):o),i&&(this.onerror=this.onerror?te(i,this.onerror):i),void 0===r?void 0===a?void 0:a:s(r,a)}}function ie(e,t){return e===Q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function se(e,t){return e===Q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}X.ModifyError=z,X.DexieError=K,X.BulkError=V;var ae={},ue=100,ce=7,le=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(t){var e=i.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),fe=le[0],he=le[1],de=le[2],pe=he&&he.then,me=fe&&fe.constructor,ve=le[3],ge=!!de,ye=!1,be=de?function(){de.then(Be)}:i.setImmediate?setImmediate.bind(null,Be):i.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Be(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Be,0)},we=function(e,t){Oe.push([e,t]),_e&&(be(),_e=!1)},xe=!0,_e=!0,Ee=[],ke=[],Te=null,Ce=Z,je={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ct(e[0],e[1])}catch(e){}})}},Se=je,Oe=[],Ie=0,Ae=[];function Re(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var t=this._PSD=Se;if(L&&(this._stackHolder=M(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Le(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&qe();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof Re?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Ue(t)),r&&Fe()}},Le.bind(null,t))}catch(e){Le(t,e)}}(this,e)}var Pe={get:function(){var e=Se,t=Ye;function n(n,r){var o=this,i=!e.global&&(e!==Se||t!==Ye);i&&et();var s=new Re(function(t,s){Ne(o,new De(st(n,e,i),st(r,e,i),t,s,e))});return L&&Me(s,this),s}return n.prototype=ae,n},set:function(e){h(this,"then",e&&e.prototype===ae?Pe:{get:function(){return e},set:Pe.set})}};function De(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Le(e,t){if(ke.push(t),null===e._state){var n=e._lib&&qe();t=Ce(t),e._state=!1,e._value=t,L&&null!==t&&"object"==typeof t&&!t._promise&&_(function(){var n=function e(t,n){var r;return p(t,n)||(r=a(t))&&e(r,n)}(t,"stack");t._promise=e,h(t,"stack",{get:function(){return ye?n&&(n.get?n.get.apply(t):n.value):e.stack}})}),function(e){Ee.some(function(t){return t._value===e._value})||Ee.push(e)}(e),Ue(e),n&&Fe()}}function Ue(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ne(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Ie&&(++Ie,we(function(){0==--Ie&&He()},[]))}function Ne(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,we($e,[n,e,t])}else e._listeners.push(t)}function $e(e,t,n){try{Te=t;var r,o=t._value;t._state?r=e(o):(ke.length&&(ke=[]),r=e(o),-1===ke.indexOf(o)&&function(e){var t=Ee.length;for(;t;)if(Ee[--t]._value===e._value)return void Ee.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Te=null,0==--Ie&&He(),--n.psd.ref||n.psd.finalize()}}function Me(e,t){var n=t?t._numPrev+1:0;n<ue&&(e._prev=t,e._numPrev=n)}function Be(){qe()&&Fe()}function qe(){var e=xe;return xe=!1,_e=!1,e}function Fe(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);xe=!0,_e=!0}function He(){var e=Ee;Ee=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ke(e){return new Re(ae,!1,e)}function ze(e,t){var n=Se;return function(){var r=qe(),o=Se;try{return rt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{rt(o,!1),r&&Fe()}}}l(Re.prototype,{then:Pe,_then:function(e,t){Ne(this,new De(null,null,e,t,Se))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):Ke(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Ke(e)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ke(t)})},stack:{get:function(){if(this._stack)return this._stack;try{ye=!0;var e=function e(t,n,r){if(n.length===r)return n;var o="";if(!1===t._state){var i,s,a=t._value;null!=a?(i=a.name||"Error",s=a.message||a,o=B(a,0)):(i=a,s=""),n.push(i+(s?": "+s:"")+o)}L&&((o=B(t._stackHolder,2))&&-1===n.indexOf(o)&&n.push(o),t._prev&&e(t._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ye=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Re(function(r,o){var i=setTimeout(function(){return o(new J.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Re.prototype,Symbol.toStringTag,"Promise"),je.env=ot(),l(Re,{all:function(){var e=D.apply(null,arguments).map(tt);return new Re(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(o,i){return Re.resolve(o).then(function(n){e[i]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Re)return e;if(e&&"function"==typeof e.then)return new Re(function(t,n){e.then(t,n)});var t=new Re(ae,!0,e);return Me(t,Te),t},reject:Ke,race:function(){var e=D.apply(null,arguments).map(tt);return new Re(function(t,n){e.map(function(e){return Re.resolve(e).then(t,n)})})},PSD:{get:function(){return Se},set:function(e){return Se=e}},newPSD:Qe,usePSD:it,scheduler:{get:function(){return we},set:function(e){we=e}},rejectionMapper:{get:function(){return Ce},set:function(e){Ce=e}},follow:function(e,t){return new Re(function(n,r){return Qe(function(t,n){var r=Se;r.unhandleds=[],r.onunhandled=n,r.finalize=te(function(){var e=this;!function(e){Ae.push(function t(){e();Ae.splice(Ae.indexOf(t),1)}),++Ie,we(function(){0==--Ie&&He()},[])}(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}});var Ve={awaits:0,echoes:0,id:0},We=0,Ge=[],Je=0,Ye=0,Xe=0;function Qe(e,t,n,r){var o=Se,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++Xe;var a=je.env;i.env=ge?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,resolve:Re.resolve,reject:Re.reject,nthen:at(a.nthen,i),gthen:at(a.gthen,i)}:{},t&&s(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=it(i,e,n,r);return 0===i.ref&&i.finalize(),u}function Ze(){return Ve.id||(Ve.id=++We),++Ve.awaits,Ve.echoes+=ce,Ve.id}function et(e){!Ve.awaits||e&&e!==Ve.id||(0==--Ve.awaits&&(Ve.id=0),Ve.echoes=Ve.awaits*ce)}function tt(e){return Ve.echoes&&e&&e.constructor===me?(Ze(),e.then(function(e){return et(),e},function(e){return et(),lt(e)})):e}function nt(){var e=Ge[Ge.length-1];Ge.pop(),rt(e,!1)}function rt(e,t){var n,r=Se;if((t?!Ve.echoes||Je++&&e===Se:!Je||--Je&&e===Se)||(n=t?function(e){++Ye,Ve.echoes&&0!=--Ve.echoes||(Ve.echoes=Ve.id=0),Ge.push(Se),rt(e,!0)}.bind(null,e):nt,pe.call(fe,n)),e!==Se&&(Se=e,r===je&&(je.env=ot()),ge)){var o=je.env.Promise,s=e.env;he.then=s.nthen,o.prototype.then=s.gthen,(r.global||e.global)&&(Object.defineProperty(i,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject)}}function ot(){var e=i.Promise;return ge?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:he.then,gthen:e.prototype.then}:{}}function it(e,t,n,r,o){var i=Se;try{return rt(e,!0),t(n,r,o)}finally{rt(i,!1)}}function st(e,t,n){return"function"!=typeof e?e:function(){var r=Se;n&&Ze(),rt(t,!0);try{return e.apply(this,arguments)}finally{rt(r,!1)}}}function at(e,t){return function(n,r){return e.call(this,st(n,t,!1),st(r,t,!1))}}var ut="unhandledrejection";function ct(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,o={promise:t,reason:e};if(i.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ut,!0,!0),s(r,o)):i.CustomEvent&&s(r=new CustomEvent(ut,{detail:o}),o),r&&i.dispatchEvent&&(dispatchEvent(r),!i.PromiseRejectionEvent&&i.onunhandledrejection))try{i.onunhandledrejection(r)}catch(e){}r.defaultPrevented||console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var lt=Re.reject;function ft(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var i=1,s=arguments.length;i<s;++i)a(arguments[i]);return n;function a(e,i,s){if("object"!=typeof e){var u;i||(i=ie),s||(s=Q);var c={subscribers:[],fire:s,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=i(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(i,s)}};return t[e]=n[e]=c,c}r(u=e).forEach(function(e){var t=u[e];if(o(t))a(e,u[e][0],u[e][1]);else{if("asap"!==t)throw new J.InvalidArgument("Invalid event config");var n=a(e,Z,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}var ht,dt=String.fromCharCode(65535),pt=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return dt}}(),mt=-1/0,vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gt="String expected.",yt=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wt=bt,xt=bt,_t=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Et(e,t){var n,a,u,f,d,p=Et.dependencies,m=s({addons:Et.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},t),b=m.addons,C=m.autoOpen,S=m.indexedDB,A=m.IDBKeyRange,R=this._dbSchema={},U=[],N=[],$={},q=null,F=null,H=!1,K=null,W=!1,G="readwrite",Y=this,X=new Re(function(e){n=e}),te=new Re(function(e,t){a=t}),ie=!0,ae=!!Dt(S);function ue(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ce(e,t,n){var o=Y._createTransaction(G,N,R);o.create(t),o._completion.catch(n);var i=o._reject.bind(o);Qe(function(){Se.trans=o,0===e?(r(R).forEach(function(e){le(t,e,R[e].primKey,R[e].indexes)}),Re.follow(function(){return Y.on.populate.fire(o)}).catch(i)):function(e,t,n){var o=[],i=U.filter(function(t){return t._cfg.version===e})[0];if(!i)throw new J.Upgrade("Dexie specification of currently installed DB version is missing");R=Y._dbSchema=i._cfg.dbschema;var s=!1;return U.filter(function(t){return t._cfg.version>e}).forEach(function(e){o.push(function(){var r=R,o=e._cfg.dbschema;Pe(r,n),Pe(o,n),R=Y._dbSchema=o;var i=function(e,t){var n={del:[],add:[],change:[]};for(var r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],i=t[r];if(o){var s={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)s.recreate=!0,n.change.push(s);else{var a=o.idxByName,u=i.idxByName;for(var c in a)u[c]||s.del.push(c);for(c in u){var l=a[c],f=u[c];l?l.src!==f.src&&s.change.push(f):s.add.push(f)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,i])}return n}(r,o);if(i.add.forEach(function(e){le(n,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new J.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach(function(e){fe(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),fe(t,e)}),e.del.forEach(function(e){t.deleteIndex(e)})}),e._cfg.contentUpgrade)return s=!0,Re.follow(function(){e._cfg.contentUpgrade(t)})}),o.push(function(t){s&&wt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t)})}),function e(){return o.length?Re.resolve(o.shift()(t.idbtrans)).then(e):Re.resolve()}().then(function(){!function(e,t){r(e).forEach(function(n){t.db.objectStoreNames.contains(n)||le(t,n,e[n].primKey,e[n].indexes)})}(R,n)})}(e,o,t).catch(i)})}function le(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){fe(o,e)}),o}function fe(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function he(e,t,n){this.name=e,this.schema=t,this._tx=n,this.hook=$[e]?$[e].hook:ft(null,{creating:[ne,Q],reading:[ee,Z],updating:[oe,Q],deleting:[re,Q]})}function de(e,t,n){return(n?St:Ct)(function(n){e.push(n),t&&t()})}function pe(e,t,n,r,o){return new Re(function(i,s){var a=n.length,u=a-1;if(0===a)return i();if(r){var c,l=St(s),f=Tt(null);_(function(){for(var r=0;r<a;++r){c={onsuccess:null,onerror:null};var s=n[r];o.call(c,s[0],s[1],t);var h=e.delete(s[0]);h._hookCtx=c,h.onerror=l,h.onsuccess=r===u?Tt(i):f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var h=0;h<a;++h){var d=e.delete(n[h]);d.onerror=Ct(s),h===u&&(d.onsuccess=ze(function(){return i()}))}})}function ge(e,t,n,r){var o=this;this.db=Y,this.mode=e,this.storeNames=t,this.idbtrans=null,this.on=ft(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),lt(e)})}function ye(e,t,n){this._ctx={table:e,index:":id"===t?null:t,or:n}}function be(e,t){var n=null,r=null;if(t)try{n=t()}catch(e){r=e}var o=e._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function we(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xe(e,t){return e._cfg.version-t._cfg.version}function _e(e,t,n){t.forEach(function(t){var r=n[t];e.forEach(function(e){t in e||(e===ge.prototype||e instanceof ge?h(e,t,{get:function(){return this.table(t)}}):e[t]=new he(t,r))})})}function Ee(e,t,n,r,o,i){var s=ze(i?function(e,t,r){return n(i(e),t,r)}:n,o);e.onerror||(e.onerror=Ct(o)),e.onsuccess=x(t?function(){var n=e.result;if(n){var i=function(){n.continue()};t(n,function(e){i=e},r,o)&&s(n.value,n,function(e){i=e}),i()}else r()}:function(){var t=e.result;if(t){var n=function(){t.continue()};s(t.value,t,function(e){n=e}),n()}else r()},o)}function ke(e,t){return S.cmp(e,t)}function Te(e,t){return ke(e,t)>0?e:t}function Ce(e,t){return S.cmp(e,t)}function je(e,t){return S.cmp(t,e)}function Oe(e,t){return e<t?-1:e===t?0:1}function Ie(e,t){return e>t?-1:e===t?0:1}function Ae(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}function Pe(e,t){for(var n=t.db.objectStoreNames,r=0;r<n.length;++r){var o=n[r],s=t.objectStore(o);u="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var c=s.indexNames[a],l=s.index(c).keyPath,f="string"==typeof l?l:"["+v(l).join("+")+"]";if(e[o]){var h=e[o].idxByName[f];h&&(h.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u=!1)}function De(e){Y.on("blocked").fire(e),yt.filter(function(e){return e.name===Y.name&&e!==Y&&!e._vcFired}).map(function(t){return t.on("versionchange").fire(e)})}this.version=function(e){if(q||H)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=U.filter(function(t){return t._cfg.version===e})[0];return t||(t=new ue(e),U.push(t),U.sort(xe),ie=!1,t)},s(ue.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var t={};U.forEach(function(e){s(t,e._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(t,n),R=Y._dbSchema=n,[$,Y,ge.prototype].forEach(function(e){for(var t in e)e[t]instanceof he&&delete e[t]}),_e([$,Y,ge.prototype,this._cfg.tables],r(n),n),N=r(n),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,t){r(e).forEach(function(n){if(null!==e[n]){var r={},i=function(e){var t=[];return e.split(",").forEach(function(e){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;t.push(new At(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),/\./.test(e)))}),t}(e[n]),s=i.shift();if(s.multi)throw new J.Schema("Primary key cannot be multi-valued");s.keyPath&&k(r,s.keyPath,s.auto?0:s.keyPath),i.forEach(function(e){if(e.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string");k(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),t[n]=new Rt(n,s,i,r)}})}}),this._allTables=$,this._createTransaction=function(e,t,n,r){return new ge(e,t,n,r)},this._whenReady=function(e){return W||Se.letThrough?e():new Re(function(e,t){if(!H){if(!C)return void t(new J.DatabaseClosed);Y.open().catch(Q)}X.then(e,t)}).then(e)},this.verno=0,this.open=function(){if(H||q)return X.then(function(){return F?lt(F):Y});L&&(te._stackHolder=M()),H=!0,F=null,W=!1;var t=n,o=null;return Re.race([te,new Re(function(t,n){if(!S)throw new J.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=ie?S.open(e):S.open(e,Math.round(10*Y.verno));if(!i)throw new J.MissingAPI("IndexedDB API not available");i.onerror=Ct(n),i.onblocked=ze(De),i.onupgradeneeded=ze(function(t){if(o=i.transaction,ie&&!Y._allowEmptyDB){i.onerror=Ot,o.abort(),i.result.close();var r=S.deleteDatabase(e);r.onsuccess=r.onerror=ze(function(){n(new J.NoSuchDatabase("Database "+e+" doesnt exist"))})}else{o.onerror=Ct(n),ce((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,o,n)}},n),i.onsuccess=ze(function(){if(o=null,q=i.result,yt.push(Y),ie)!function(){if(Y.verno=q.version/10,Y._dbSchema=R={},0===(N=v(q.objectStoreNames,0)).length)return;var e=q.transaction(Pt(N),"readonly");N.forEach(function(t){for(var n=e.objectStore(t),r=n.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new At(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,o),s=[],a=0;a<n.indexNames.length;++a){var u=n.index(n.indexNames[a]);r=u.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new At(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,o);s.push(c)}R[t]=new Rt(t,i,s,{})}),_e([$],r(R),R)}();else if(q.objectStoreNames.length>0)try{Pe(R,q.transaction(Pt(q.objectStoreNames),"readonly"))}catch(e){}q.onversionchange=ze(function(e){Y._vcFired=!0,Y.on("versionchange").fire(e)}),ae||"__dbnames"===e||ht.dbnames.put({name:e}).catch(Q),t()},n)})]).then(function(){return K=[],Re.resolve(Et.vip(Y.on.ready.fire)).then(function e(){if(K.length>0){var t=K.reduce(se,Q);return K=[],Re.resolve(Et.vip(t)).then(e)}})}).finally(function(){K=null}).then(function(){return H=!1,Y}).catch(function(e){try{o&&o.abort()}catch(e){}return H=!1,Y.close(),lt(F=e)}).finally(function(){W=!0,t()})},this.close=function(){var e=yt.indexOf(Y);if(e>=0&&yt.splice(e,1),q){try{q.close()}catch(e){}q=null}C=!1,F=new J.DatabaseClosed,H&&a(F),X=new Re(function(e){n=e}),te=new Re(function(e,t){a=t})},this.delete=function(){var t=arguments.length>0;return new Re(function(n,r){if(t)throw new J.InvalidArgument("Arguments not allowed in db.delete()");function o(){Y.close();var t=S.deleteDatabase(e);t.onsuccess=ze(function(){ae||ht.dbnames.delete(e).catch(Q),n()}),t.onerror=Ct(r),t.onblocked=De}H?X.then(o):o()})},this.backendDB=function(){return q},this.isOpen=function(){return null!==q},this.hasBeenClosed=function(){return F&&F instanceof J.DatabaseClosed},this.hasFailed=function(){return null!==F},this.dynamicallyOpened=function(){return ie},this.name=e,l(this,{tables:{get:function(){return r($).map(function(e){return $[e]})}}}),this.on=ft(this,"populate","blocked","versionchange",{ready:[se,Q]}),this.on.ready.subscribe=g(this.on.ready.subscribe,function(e){return function(t,n){Et.vip(function(){W?(F||Re.resolve().then(t),n&&e(t)):K?(K.push(t),n&&e(t)):(e(t),n||e(function e(){Y.on.ready.unsubscribe(t),Y.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new J.InvalidArgument("Too few arguments");var o=new Array(r-1);for(;--r;)o[r-1]=arguments[r];n=o.pop();var i=j(o);return[e,i,n]}.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,t,n){var r=Se.trans;r&&r.db===Y&&-1===e.indexOf("!")||(r=null);var o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var i=t.map(function(e){var t=e instanceof he?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=G)throw new J.InvalidArgument("Invalid transaction mode: "+e);e=G}if(r){if("readonly"===r.mode&&e===G){if(!o)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach(function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!o)throw new J.SubTransaction("Table "+e+" not included in parent transaction.");r=null}}),o&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,function(t,n){n(e)}):lt(e)}return r?r._promise(e,s,"lock"):Se.trans?it(Se.transless,function(){return Y._whenReady(s)}):Y._whenReady(s);function s(){return Re.resolve().then(function(){var t,o=Se.transless||Se,s=Y._createTransaction(e,i,R,r),a={trans:s,transless:o};r?s.idbtrans=r.idbtrans:s.create(),n.constructor===ve&&Ze();var u=Re.follow(function(){if(t=n.call(s,s))if(t.constructor===me){var e=et.bind(null,null);t.then(e,e)}else"function"==typeof t.next&&"function"==typeof t.throw&&(t=It(t))},a);return(t&&"function"==typeof t.then?Re.resolve(t).then(function(e){return s.active?e:lt(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return t})).then(function(e){return r&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),lt(e)})})}},this.table=function(e){if(!c($,e))throw new J.InvalidTable("Table "+e+" does not exist");return $[e]},l(he.prototype,{_trans:function(e,t,n){var r=this._tx||Se.trans;return r&&r.db===Y?r===Se.trans?r._promise(e,t,n):Qe(function(){return r._promise(e,t,n)},{trans:r,transless:Se.transless||Se}):function e(t,n,r){if(W||Se.letThrough){var o=Y._createTransaction(t,n,R);try{o.create()}catch(e){return lt(e)}return o._promise(t,function(e,t){return Qe(function(){return Se.trans=o,r(e,t,o)})}).then(function(e){return o._completion.then(function(){return e})})}if(!H){if(!C)return lt(new J.DatabaseClosed);Y.open().catch(Q)}return X.then(function(){return e(t,n,r)})}(e,[this.name],t)},_idbstore:function(e,t,n){var r=this.name;return this._trans(e,function(e,n,o){if(-1===o.storeNames.indexOf(r))throw new J.NotFound("Table"+r+" not part of transaction");return t(e,n,o.idbtrans.objectStore(r),o)},n)},get:function(e,t){if(e&&e.constructor===Object)return this.where(e).first(t);var n=this;return this._idbstore("readonly",function(t,r,o){var i=o.get(e);i.onerror=Ct(r),i.onsuccess=ze(function(){t(n.hook.reading.fire(i.result))},r)}).then(t)},where:function(e){if("string"==typeof e)return new ye(this,e);if(o(e))return new ye(this,"["+e.join("+")+"]");var t=r(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})&&e.keyPath.every(function(e){return t.indexOf(e)>=0})})[0];if(n&&pt!==dt)return this.where(n.name).equals(n.keyPath.map(function(t){return e[t]}));n||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var i=this.schema.idxByName,s=t.reduce(function(t,n){return[t[0]||i[n],t[0]||!i[n]?Ae(t[1],function(t){return""+E(t,n)==""+e[n]}):t[1]]},[null,null]),a=s[0];return a?this.where(a.name).equals(e[a.keyPath]).filter(s[1]):n?this.filter(s[1]):this.where(t).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new be(new ye(this,o(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new be(new ye(this))},mapToClass:function(e,t){this.schema.mappedClass=e;var n=Object.create(e.prototype);t&&kt(n,t),this.schema.instanceTemplate=n;var r=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(c(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},defineClass:function(e){return this.mapToClass(Et.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===Q?this._idbstore(G,function(t,n,r,o){t(pe(r,o,e,!1,Q))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,t){var n=this;return this._idbstore(G,function(r,o,i){if(!i.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&t)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var s,a,u=function(e){0===c.length?r(e):o(new V(n.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,f=n;if(n.hook.creating.fire===Q&&n.hook.updating.fire===Q){a=de(c);for(var h=0,d=e.length;h<d;++h)(s=t?i.put(e[h],t[h]):i.put(e[h])).onerror=a;s.onerror=de(c,u),s.onsuccess=jt(u)}else{var p=t||i.keyPath&&e.map(function(e){return E(e,i.keyPath)}),m=p&&w(p,function(t,n){return null!=t&&[t,e[n]]});(p?f.where(":id").anyOf(p.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(z,function(e){c=e.failures}).then(function(){for(var n=[],r=t&&[],o=p.length-1;o>=0;--o){var i=p[o];(null==i||m[i])&&(n.push(e[o]),t&&r.push(i),null!=i&&(m[i]=null))}return n.reverse(),t&&r.reverse(),f.bulkAdd(n,r)}).then(function(e){var t=p[p.length-1];return null!=t?t:e}):f.bulkAdd(e)).then(u).catch(V,function(e){c=c.concat(e.failures),u()}).catch(o)}},"locked")},bulkAdd:function(e,t){var n=this,r=this.hook.creating.fire;return this._idbstore(G,function(o,i,s,a){if(!s.keyPath&&!n.schema.primKey.auto&&!t)throw new J.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&t)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(t&&t.length!==e.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();function u(e){0===h.length?o(e):i(new V(n.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}var c,l,f,h=[],d=e.length;if(r!==Q){var p,m=s.keyPath;l=de(h,null,!0),f=Tt(null),_(function(){for(var n=0,o=e.length;n<o;++n){p={onerror:null,onsuccess:null};var i=t&&t[n],u=e[n],h=t?i:m?E(u,m):void 0,d=r.call(p,h,u,a);null==h&&null!=d&&(m?k(u=O(u),m,d):i=d),(c=null!=i?s.add(u,i):s.add(u))._hookCtx=p,n<o-1&&(c.onerror=l,p.onsuccess&&(c.onsuccess=f))}},function(e){throw p.onerror&&p.onerror(e),e}),c.onerror=de(h,u,!0),c.onsuccess=Tt(u)}else{l=de(h);for(var v=0,g=e.length;v<g;++v)(c=t?s.add(e[v],t[v]):s.add(e[v])).onerror=l;c.onerror=de(h,u),c.onsuccess=jt(u)}})},add:function(e,t){var n=this.hook.creating.fire;return this._idbstore(G,function(r,o,i,s){var a={onsuccess:null,onerror:null};if(n!==Q){var u=null!=t?t:i.keyPath?E(e,i.keyPath):void 0,c=n.call(a,u,e,s);null==u&&null!=c&&(i.keyPath?k(e,i.keyPath,c):t=c)}try{var l=null!=t?i.add(e,t):i.add(e);l._hookCtx=a,l.onerror=St(o),l.onsuccess=Tt(function(t){var n=i.keyPath;n&&k(e,n,t),r(t)})}catch(e){throw a.onerror&&a.onerror(e),e}})},put:function(e,t){var n=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==Q||o!==Q){var i=this.schema.primKey.keyPath,s=void 0!==t?t:i&&E(e,i);return null==s?this.add(e):(e=O(e),this._trans(G,function(){return n.where(":id").equals(s).modify(function(){this.value=e}).then(function(r){return 0===r?n.add(e,t):s})},"locked"))}return this._idbstore(G,function(n,r,o){var i=void 0!==t?o.put(e,t):o.put(e);i.onerror=Ct(r),i.onsuccess=ze(function(t){var r=o.keyPath;r&&k(e,r,t.target.result),n(i.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(G,function(t,n,r){var o=r.delete(e);o.onerror=Ct(n),o.onsuccess=ze(function(){t(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(G,function(e,t,n){var r=n.clear();r.onerror=Ct(t),r.onsuccess=ze(function(){e(r.result)})})},update:function(e,t){if("object"!=typeof t||o(t))throw new J.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||o(e))return this.where(":id").equals(e).modify(t);r(t).forEach(function(n){k(e,n,t[n])});var n=E(e,this.schema.primKey.keyPath);return void 0===n?lt(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}}),l(ge.prototype,{_lock:function(){return y(!Se.global),++this._reculock,1!==this._reculock||Se.global||(Se.lockOwnerFor=this),this},_unlock:function(){if(y(!Se.global),0==--this._reculock)for(Se.global||(Se.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{it(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Se.lockOwnerFor!==this},create:function(e){var t=this;if(!this.mode)return this;if(y(!this.idbtrans),!e&&!q)switch(F&&F.name){case"DatabaseClosedError":throw new J.DatabaseClosed(F);case"MissingAPIError":throw new J.MissingAPI(F.message,F);default:throw new J.OpenFailed(F)}if(!this.active)throw new J.TransactionInactive;return y(null===this._completion._state),(e=this.idbtrans=e||q.transaction(Pt(this.storeNames),this.mode)).onerror=ze(function(n){Ot(n),t._reject(e.error)}),e.onabort=ze(function(n){Ot(n),t.active&&t._reject(new J.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=ze(function(){t.active=!1,t._resolve()}),this},_promise:function(e,t,n){var r=this;if(e===G&&this.mode!==G)return lt(new J.ReadOnly("Transaction is readonly"));if(!this.active)return lt(new J.TransactionInactive);if(this._locked())return new Re(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},Se])});if(n)return Qe(function(){var e=new Re(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new Re(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var t=this._root();if(e=Re.resolve(e),t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return e});else{t._waitingFor=e,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Re(function(n,o){e.then(function(e){return t._waitingQueue.push(ze(n.bind(null,e)))},function(e){return t._waitingQueue.push(ze(o.bind(null,e)))}).finally(function(){t._waitingFor===r&&(t._waitingFor=null)})})},abort:function(){this.active&&this._reject(new J.Abort),this.active=!1},tables:{get:(f="Transaction.tables",d=function(){return $},function(){return console.warn(f+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+B(M(),1)),d.apply(this,arguments)})},table:function(e){return new he(e,Y.table(e).schema,this)}}),l(ye.prototype,function(){function e(e,t,n){var r=e instanceof ye?new be(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function t(e){return new be(e,function(){return A.only("")}).limit(0)}function n(e,t,n,r,o,i){for(var s=Math.min(e.length,r.length),a=-1,u=0;u<s;++u){var c=t[u];if(c!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[u],c)<0&&(a=u)}return s<r.length&&"next"===i?e+n.substr(e.length):s<e.length&&"prev"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function r(t,r,o,i){var s,a,u,c,l,f,h,d=o.length;if(!o.every(function(e){return"string"==typeof e}))return e(t,gt);function p(e){s=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),a=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?Oe:Ie;var t=o.map(function(e){return{lower:a(e),upper:s(e)}}).sort(function(e,t){return u(e.lower,t.lower)});c=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),f=e,h="next"===e?"":i}p("next");var m=new be(t,function(){return A.bound(c[0],l[d-1]+i)});m._ondirectionchange=function(e){p(e)};var v=0;return m._addAlgorithm(function(e,t,o){var i=e.key;if("string"!=typeof i)return!1;var s=a(i);if(r(s,l,v))return!0;for(var p=null,m=v;m<d;++m){var g=n(i,s,c[m],l[m],u,f);null===g&&null===p?v=m+1:(null===p||u(p,g)>0)&&(p=g)}return t(null!==p?function(){e.continue(p+h)}:o),!1}),m}return{between:function(n,r,o,i){o=!1!==o,i=!0===i;try{return ke(n,r)>0||0===ke(n,r)&&(o||i)&&(!o||!i)?t(this):new be(this,function(){return A.bound(n,r,!o,!i)})}catch(t){return e(this,vt)}},equals:function(e){return new be(this,function(){return A.only(e)})},above:function(e){return new be(this,function(){return A.lowerBound(e,!0)})},aboveOrEqual:function(e){return new be(this,function(){return A.lowerBound(e)})},below:function(e){return new be(this,function(){return A.upperBound(e,!0)})},belowOrEqual:function(e){return new be(this,function(){return A.upperBound(e)})},startsWith:function(t){return"string"!=typeof t?e(this,gt):this.between(t,t+dt,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):r(this,function(e,t){return 0===e.indexOf(t[0])},[e],dt)},equalsIgnoreCase:function(e){return r(this,function(e,t){return e===t[0]},[e],"")},anyOfIgnoreCase:function(){var e=D.apply(P,arguments);return 0===e.length?t(this):r(this,function(e,t){return-1!==t.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=D.apply(P,arguments);return 0===e.length?t(this):r(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,dt)},anyOf:function(){var n=D.apply(P,arguments),r=Ce;try{n.sort(r)}catch(t){return e(this,vt)}if(0===n.length)return t(this);var o=new be(this,function(){return A.bound(n[0],n[n.length-1])});o._ondirectionchange=function(e){r="next"===e?Ce:je,n.sort(r)};var i=0;return o._addAlgorithm(function(e,t,o){for(var s=e.key;r(s,n[i])>0;)if(++i===n.length)return t(o),!1;return 0===r(s,n[i])||(t(function(){e.continue(n[i])}),!1)}),o},notEqual:function(e){return this.inAnyRange([[mt,e],[e,pt]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var t=D.apply(P,arguments);if(0===t.length)return new be(this);try{t.sort(Ce)}catch(t){return e(this,vt)}var n=t.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[mt,t]]},null);return n.push([t[t.length-1],pt]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return t(this);if(!n.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&Ce(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var o=!r||!1!==r.includeLowers,i=r&&!0===r.includeUppers;var s,a=Ce;function u(e,t){return a(e[0],t[0])}try{(s=n.reduce(function(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(ke(t[0],o[1])<0&&ke(t[1],o[0])>0){o[0]=(i=o[0],s=t[0],ke(i,s)<0?i:s),o[1]=Te(o[1],t[1]);break}}var i,s;return n===r&&e.push(t),e},[])).sort(u)}catch(t){return e(this,vt)}var c=0,l=i?function(e){return Ce(e,s[c][1])>0}:function(e){return Ce(e,s[c][1])>=0},f=o?function(e){return je(e,s[c][0])>0}:function(e){return je(e,s[c][0])>=0};var h=l,d=new be(this,function(){return A.bound(s[0][0],s[s.length-1][1],!o,!i)});return d._ondirectionchange=function(e){"next"===e?(h=l,a=Ce):(h=f,a=je),s.sort(u)},d._addAlgorithm(function(e,t,n){for(var r=e.key;h(r);)if(++c===s.length)return t(n),!1;return!!function(e){return!l(e)&&!f(e)}(r)||0!==ke(r,s[c][1])&&0!==ke(r,s[c][0])&&(t(function(){a===Ce?e.continue(s[c][0]):e.continue(s[c][1])}),!1)}),d},startsWithAnyOf:function(){var n=D.apply(P,arguments);return n.every(function(e){return"string"==typeof e})?0===n.length?t(this):this.inAnyRange(n.map(function(e){return[e,e+dt]})):e(this,"startsWithAnyOf() only works with strings")}}}),l(be.prototype,function(){function e(e,t){e.filter=Ae(e.filter,t)}function t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ae(r(),t())}:t,e.justLimit=n&&!r}function n(e,t){if(e.isPrimKey)return t;var n=e.table.schema.idxByName[e.index];if(!n)throw new J.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return t.index(n.name)}function o(e,t){var r=n(e,t);return e.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(e.range||null,e.dir+e.unique):r.openCursor(e.range||null,e.dir+e.unique)}function i(e,t,n,r,i){var s=e.replayFilter?Ae(e.filter,e.replayFilter()):e.filter;e.or?function(){var a={},u=0;function l(){2==++u&&n()}function f(e,n,o){if(!s||s(n,o,l,r)){var i=n.primaryKey,u=""+i;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(i)),c(a,u)||(a[u]=!0,t(e,n,o))}}e.or._iterate(f,l,r,i),Ee(o(e,i),e.algorithm,f,l,r,!e.keysOnly&&e.valueMapper)}():Ee(o(e,i),Ae(e.algorithm,s),t,n,r,!e.keysOnly&&e.valueMapper)}return{_read:function(e,t){var n=this._ctx;return n.error?n.table._trans(null,lt.bind(null,n.error)):n.table._idbstore("readonly",e).then(t)},_write:function(e){var t=this._ctx;return t.error?t.table._trans(null,lt.bind(null,t.error)):t.table._idbstore(G,e,"locked")},_addAlgorithm:function(e){var t=this._ctx;t.algorithm=Ae(t.algorithm,e)},_iterate:function(e,t,n,r){return i(this._ctx,e,t,n,r)},clone:function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var t=this._ctx;return this._read(function(n,r,o){i(t,e,n,r,o)})},count:function(e){var t=this._ctx;if(we(t,!0))return this._read(function(e,r,o){var i=n(t,o),s=t.range?i.count(t.range):i.count();s.onerror=Ct(r),s.onsuccess=function(n){e(Math.min(n.target.result,t.limit))}},e);var r=0;return this._read(function(e,n,o){i(t,function(){return++r,!1},function(){e(r)},n,o)},e)},sortBy:function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,o),r=i(t,o);return n<r?-s:n>r?s:0}return this.toArray(function(e){return e.sort(a)}).then(t)},toArray:function(e){var t=this._ctx;return this._read(function(e,r,o){if(u&&"next"===t.dir&&we(t,!0)&&t.limit>0){var s=t.table.hook.reading.fire,a=n(t,o),c=t.limit<1/0?a.getAll(t.range,t.limit):a.getAll(t.range);c.onerror=Ct(r),c.onsuccess=jt(s===Z?e:function(t){try{e(t.map(s))}catch(e){r(e)}})}else{var l=[];i(t,function(e){l.push(e)},function(){e(l)},r,o)}},e)},offset:function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,we(n)?t(n,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):t(n,function(){var t=e;return function(){return--t<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),t(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},until:function(t,n){this._ctx;return e(this._ctx,function(e,r,o){return!t(e.value)||(r(o),n)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(t){var n,r;return e(this._ctx,function(e){return t(e.value)}),n=this._ctx,r=t,n.isMatch=Ae(n.isMatch,r),this},and:function(e){return this.filter(e)},or:function(e){return new ye(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},keys:function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},primaryKeys:function(e){var t=this._ctx;if(u&&"next"===t.dir&&we(t,!0)&&t.limit>0)return this._read(function(e,r,o){var i=n(t,o),s=t.limit<1/0?i.getAllKeys(t.range,t.limit):i.getAllKeys(t.range);s.onerror=Ct(r),s.onsuccess=jt(e)}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,function(e){var t=e.primaryKey.toString(),n=c(r,t);return r[t]=!0,!n}),this},modify:function(e){var t=this,n=this._ctx.table.hook,o=n.updating.fire,i=n.deleting.fire;return this._write(function(n,a,u,l){var f;if("function"==typeof e)f=o===Q&&i===Q?e:function(t){var n=O(t);if(!1===e.call(this,t,this))return!1;if(c(this,"value")){var s=I(n,this.value),a=o.call(this,s,this.primKey,n,l);a&&(t=this.value,r(a).forEach(function(e){k(t,e,a[e])}))}else i.call(this,this.primKey,t,l)};else if(o===Q){var h=r(e),d=h.length;f=function(t){for(var n=!1,r=0;r<d;++r){var o=h[r],i=e[o];E(t,o)!==i&&(k(t,o,i),n=!0)}return n}}else{var p=e;e=T(p),f=function(t){var n=!1,i=o.call(this,e,this.primKey,O(t),l);return i&&s(e,i),r(e).forEach(function(r){var o=e[r];E(t,r)!==o&&(k(t,r,o),n=!0)}),i&&(e=T(p)),n}}var m=0,v=0,g=!1,y=[],b=[],w=null;function x(e){return e&&(y.push(e),b.push(w)),a(new z("Error modifying one or more objects",y,v,b))}function C(){g&&v+y.length===m&&(y.length>0?x():n(v))}t.clone().raw()._iterate(function(e,t){w=t.primaryKey;var n={primKey:t.primaryKey,value:e,onsuccess:null,onerror:null};function r(e){return y.push(e),b.push(n.primKey),C(),!0}if(!1!==f.call(n,e,n)){var o=!c(n,"value");++m,_(function(){var e=o?t.delete():t.update(n.value);e._hookCtx=n,e.onerror=St(r),e.onsuccess=Tt(function(){++v,C()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){g=!0,C()},x,u)})},delete:function(){var e=this,t=this._ctx,n=t.range,r=t.table.hook.deleting.fire,o=r!==Q;if(!o&&we(t)&&(t.isPrimKey&&!xt||!n))return this._write(function(e,t,r){var o=Ct(t),i=n?r.count(n):r.count();i.onerror=o,i.onsuccess=function(){var s=i.result;_(function(){var t=n?r.delete(n):r.clear();t.onerror=o,t.onsuccess=function(){return e(s)}},function(e){return t(e)})}});var i=o?2e3:1e4;return this._write(function(n,s,a,u){var c=0,l=e.clone({keysOnly:!t.isMatch&&!o}).distinct().limit(i).raw(),f=[],h=function(){return l.each(o?function(e,t){f.push([t.primaryKey,t.value])}:function(e,t){f.push(t.primaryKey)}).then(function(){return o?f.sort(function(e,t){return Ce(e[0],t[0])}):f.sort(Ce),pe(a,u,f,o,r)}).then(function(){var e=f.length;return f=[],e<i?c+=e:h()})};n(h())})}}}),s(this,{Collection:be,Table:he,Transaction:ge,Version:ue,WhereClause:ye}),Y.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Y.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Y.name+"'. Closing db now to resume the delete request."),Y.close()}),Y.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Y.name+"') was blocked"):console.warn("Upgrade '"+Y.name+"' blocked by other connection holding version "+e.oldVersion/10)}),b.forEach(function(e){e(Y)})}function kt(e,t){return r(t).forEach(function(n){var r=function e(t){if("function"==typeof t)return new t;if(o(t))return[e(t[0])];if(t&&"object"==typeof t){var n={};return kt(n,t),n}return t}(t[n]);e[n]=r}),e}function Tt(e){return ze(function(t){var n=t.target,r=n._hookCtx,o=r.value||n.result,i=r&&r.onsuccess;i&&i(o),e&&e(o)},e)}function Ct(e){return ze(function(t){return Ot(t),e(t.target.error),!1})}function jt(e){return ze(function(t){e(t.target.result)})}function St(e){return ze(function(t){var n=t.target,r=n.error,o=n._hookCtx,i=o&&o.onerror;return i&&i(r),Ot(t),e(r),!1})}function Ot(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function It(e){var t=function(t){return e.next(t)},n=i(t),r=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(n,r):o(s)?Re.all(s).then(n,r):n(s)}}return i(t)()}function At(e,t,n,r,o,i,s){this.name=e,this.keyPath=t,this.unique=n,this.multi=r,this.auto=o,this.compound=i,this.dotted=s;var a="string"==typeof t?t:t&&"["+[].join.call(t,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(o?"++":"")+a}function Rt(e,t,n,r){this.name=e,this.primKey=t||new At,this.indexes=n||[new At],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=w(n,function(e){return[e.name,e]})}function Pt(e){return 1===e.length?e[0]:e}function Dt(e){var t=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return t&&t.bind(e)}U(L,_t),l(Et,X),l(Et,{delete:function(e){var t=new Et(e),n=t.delete();return n.onblocked=function(e){return t.on("blocked",e),this},n},exists:function(e){return new Et(e).open().then(function(e){return e.close(),!0}).catch(Et.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var t=Dt(Et.dependencies.indexedDB);return t?new Re(function(e,n){var r=t();r.onsuccess=function(t){e(v(t.target.result,0))},r.onerror=Ct(n)}).then(e):ht.dbnames.toCollection().primaryKeys(e)},defineClass:function(e){return function(e){e&&s(this,e)}},applyStructure:kt,ignoreTransaction:function(e){return Se.trans?it(Se.transless,e):e()},vip:function(e){return Qe(function(){return Se.letThrough=!0,e()})},async:function(e){return function(){try{var t=It(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Re.resolve(t)}catch(e){return lt(e)}}},spawn:function(e,t,n){try{var r=It(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Re.resolve(r)}catch(e){return lt(e)}},currentTransaction:{get:function(){return Se.trans||null}},waitFor:function(e,t){var n=Re.resolve("function"==typeof e?Et.ignoreTransaction(e):e).timeout(t||6e4);return Se.trans?Se.trans.waitFor(n):n},Promise:Re,debug:{get:function(){return L},set:function(e){U(e,"dexie"===e?function(){return!0}:_t)}},derive:d,extend:s,props:l,override:g,Events:ft,getByKeyPath:E,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,function(t){k(e,t,void 0)})},shallowClone:T,deepClone:O,getObjectDiff:I,asap:b,maxKey:pt,minKey:mt,addons:[],connections:yt,MultiModifyError:J.Modify,errnames:W,IndexSpec:At,TableSchema:Rt,dependencies:{indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange},semVer:"{version}",version:"{version}".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)}),default:Et,Dexie:Et}),Re.rejectionMapper=function(e,t){if(!e||e instanceof K||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Y[e.name])return e;var n=new Y[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n},(ht=new Et("__dbnames")).version(1).stores({dbnames:"name"}),function(){if(void 0!==typeof localStorage&&void 0!==i.document)try{JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(e){return ht.dbnames.put({name:e}).catch(Q)}),localStorage.removeItem("Dexie.DatabaseNames")}catch(e){}}(),t.default=Et},function(e,t,n){var r=n(58),o=n(60),i=o;i.v1=r,i.v4=o,e.exports=i},function(e,t,n){var r,o,i=n(9),s=n(10),a=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],f=(e=e||{}).node||r,h=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==h){var d=i();null==f&&(f=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=o=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:u+1,v=p-a+(m-u)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,u=m,o=h;var g=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var b=0;b<6;++b)l[c+b]=f[b];return t||s(l)}},function(e,t){e.exports=require("crypto")},function(e,t,n){var r=n(9),o=n(10);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}}],[13]);